(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1097:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"withBucket",(function(e){return o.setup.then((function(t){return e.call(o,t,o.bucket.name)})).catch((function(e){return console.log("Failed",e)}))})),r(this,"get",(function(e,t){return o.withBucket((function(n,r){var o=n.transaction(r).objectStore(r).get(e);o.onsuccess=function(e){var n=e.target.result;return t(null,n)},o.onerror=function(e){return t(e)}}))})),r(this,"update",(function(e,t,n,r){return o.withBucket((function(n,a){var i=n.transaction(a,"readwrite").objectStore(a).put(o.beforeIndex({id:e,data:t}));i.onsuccess=function(){return o.get(e,r)},i.onerror=function(e){return r(e)}}))})),r(this,"remove",(function(e,t){return o.withBucket((function(n,r){return n.transaction(r,"readwrite").objectStore(r).delete(e).onsuccess=function(e){var n=e.target.result;return t(null,n)}}))})),r(this,"find",(function(e,t){return o.withBucket((function(e,n){var r=[],o=e.transaction(n).objectStore(n).openCursor();o.onsuccess=function(e){var n=e.target.result;return n?r.push(n.value)&&n.continue():t(null,r)},o.onerror=function(e){return t(e)}}))})),this.bucket=t,this.setup=n,this.beforeIndex=function(e){return e}};function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"provider",(function(){return function(e){return new o(e,n.setup)}})),a(this,"reset",(function(){return n.setup.then((function(e){return Promise.all(Array.prototype.map.call(e.objectStoreNames,(function(t){return new Promise((function(n,r){var o=e.transaction(t,"readwrite").objectStore(t).clear();o.onsuccess=function(){return n(t)},o.onerror=function(e){return r(e)}}))})))})).catch((function(e){return console.error("Failed to reset stores",e)}))})),this.setup=new Promise((function(e,n){return t(e,n)}))};t.a=function(e){return new i(e)}},1111:function(e,t,n){"use strict";n.r(t),n.d(t,"bootWithToken",(function(){return Bc}));n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(241),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(515),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(544),n(545),n(546),n(547),n(548),n(549),n(551),n(553),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(576),n(577),n(580),n(581),n(582),n(584),n(585),n(586),n(587),n(588),n(589),n(590),n(591),n(592),n(593),n(594),n(595),n(378),n(596),n(597),n(598),n(599),n(600),n(601),n(602),n(379),n(603),n(604),n(605),n(606),n(607),n(608),n(609),n(610),n(611),n(612),n(613),n(614),n(615),n(616),n(617),n(618),n(619),n(620),n(621),n(622),n(623),n(624),n(625),n(626),n(627),n(628),n(630),n(631),n(632),n(633),n(634),n(635),n(636),n(637),n(638),n(639),n(640),n(641),n(642),n(643),n(644),n(645),n(646),n(647),n(648),n(649),n(650),n(651),n(652),n(653),n(654),n(655),n(656),n(657),n(658),n(659),n(660),n(661),n(662),n(663),n(664),n(665),n(666),n(667),n(668),n(669),n(672),n(387),n(673),n(674);var r=n(0),o=n.n(r),a=n(12),i=n.n(a),c=n(222),u=n(117),s=(n(678),n(180)),l=n(254);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(){var e=window.innerWidth;return{windowWidth:e,isSmallScreen:e<=750,systemTheme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}},w=function(e){var t,n;return n=t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,t);var n,r,a,i,c=(n=u,function(){var e,t=v(n);if(g()){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function u(){var e;d(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(h(e=c.call.apply(c,[this].concat(n))),"state",O()),E(h(e),"updateWindowSize",(function(){return e.setState(O())})),E(h(e),"updateSystemTheme",(function(){return e.setState(O())})),e}return r=u,(a=[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateWindowSize),window.matchMedia("(prefers-color-scheme: dark)").addListener(this.updateSystemTheme)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowSize),window.matchMedia("(prefers-color-scheme: dark)").removeListener(this.updateSystemTheme)}},{key:"render",value:function(){return o.a.createElement(e,p({},this.state,this.props))}}])&&m(r.prototype,a),i&&m(r,i),u}(r.Component),E(t,"displayName","BrowserShell"),n},S=n(301),j=n(4),N=n(468),T=n(165),k=n(13),_=n.n(k);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function C(e){var t=e.className,n=P(e,["className"]);return o.a.createElement("span",{className:_()("toggle-control",t)},o.a.createElement("input",R({type:"checkbox"},n)),o.a.createElement("span",{className:"toggle-control-layers"},o.a.createElement("span",{className:"toggle-control-unchecked-color"}),o.a.createElement("span",{className:"toggle-control-checked-color"}),o.a.createElement("span",{className:"toggle-control-knob"})))}C.propTypes={className:i.a.string};var A=C;function D(){return o.a.createElement("svg",{className:"icon-cross",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M18.707 4.707l-1.414-1.414L11 9.586 4.707 3.293 3.293 4.707 9.586 11l-6.293 6.293 1.414 1.414L11 12.414l6.293 6.293 1.414-1.414L12.414 11z"}))}var L=n(169);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=z(t);if(F()){var r=z(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return H(this,e)});function c(){var e;x(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return G(U(e=i.call.apply(i,[this].concat(n))),"handleClickOutside",(function(){return e.props.onOutsideClick()})),G(U(e),"copyPublishURL",(function(){e.publishUrlElement.select();try{document.execCommand("copy")}catch(e){return}e.copyUrlElement.focus()})),G(U(e),"getPublishURL",(function(e){return Object(j.isEmpty)(e)?null:"http://simp.ly/p/".concat(e)})),G(U(e),"onPinChanged",(function(t){return e.props.onPinNote(e.props.note,t.currentTarget.checked)})),G(U(e),"onMarkdownChanged",(function(t){return e.props.onMarkdownNote(e.props.note,t.currentTarget.checked)})),e}return n=c,(r=[{key:"render",value:function(){var e,t=this,n=this.props,r=n.isMarkdown,a=n.isPinned,i=n.note,c=i&&i.data||{},u=c.modificationDate&&(e=c.modificationDate,Object(N.a)(1e3*e,"MMM d, yyyy h:mm a")),s=Object(j.includes)(c.systemTags,"published"),l=this.getPublishURL(c.publishURL);return o.a.createElement("div",{className:"note-info theme-color-bg theme-color-fg theme-color-border"},o.a.createElement("div",{className:"note-info-panel note-info-stats theme-color-border"},o.a.createElement("div",{className:"note-info-header"},o.a.createElement(T.a,{headingLevel:"2"},"Info"),o.a.createElement("button",{type:"button",className:"about-done button button-borderless",onClick:this.handleClickOutside},o.a.createElement(D,null))),u&&o.a.createElement("p",{className:"note-info-item"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Modified"),o.a.createElement("br",null),o.a.createElement("span",{className:"note-info-detail"},u))),o.a.createElement("p",{className:"note-info-item"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},((c&&c.content||"").replace(/[\u200B]+/,"").trim().replace(/['";:,.?¿\-!¡]+/g,"").match(/\S+/g)||[]).length," words"))),o.a.createElement("p",{className:"note-info-item"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},function(e){return(e||"").replace(q,"_").length}(c&&c.content)," characters")))),o.a.createElement("div",{className:"note-info-panel note-info-pin theme-color-border"},o.a.createElement("label",{className:"note-info-item",htmlFor:"note-info-pin-checkbox"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Pin to top")),o.a.createElement("span",{className:"note-info-item-control"},o.a.createElement(A,{id:"note-info-pin-checkbox",checked:a,onChange:this.onPinChanged})))),o.a.createElement("div",{className:"note-info-panel note-info-markdown theme-color-border"},o.a.createElement("label",{className:"note-info-item",htmlFor:"note-info-markdown-checkbox"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Markdown"),o.a.createElement("br",null),o.a.createElement("span",{className:"note-info-detail"},"Enable markdown formatting on this note."," ",o.a.createElement("a",{target:"_blank",href:"http://simplenote.com/help/#markdown",rel:"noopener noreferrer"},"Learn more…"))),o.a.createElement("span",{className:"note-info-item-control"},o.a.createElement(A,{id:"note-info-markdown-checkbox",checked:r,onChange:this.onMarkdownChanged})))),s&&o.a.createElement("div",{className:"note-info-panel note-info-public-link theme-color-border"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Public link"),o.a.createElement("div",{className:"note-info-form"},o.a.createElement("input",{ref:function(e){return t.publishUrlElement=e},className:"note-info-detail note-info-link-text",value:l,spellCheck:!1}),o.a.createElement("button",{ref:function(e){return t.copyUrlElement=e},type:"button",className:"button button-borderless note-info-copy-button",onClick:this.copyPublishURL},"Copy")))))}}])&&M(n.prototype,r),a&&M(n,a),c}(r.Component);G(V,"displayName","NoteInfo");var q=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var W=Object(u.b)((function(e){var t=e.ui.note;return{note:t,isMarkdown:!!t&&t.data.systemTags.includes("markdown"),isPinned:!!t&&t.data.systemTags.includes("pinned")}}),(function(e){return{onMarkdownNote:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e(L.a.ui.markdownNote(t,n))},onOutsideClick:function(){return e(L.a.ui.toggleNoteInfo())},onPinNote:function(t,n){return e(L.a.ui.pinNote(t,n))}}}))(Object(S.a)(V)),K=n(8),Y=n(9),Q=function(e){var t=e.icon,n=e.isSelected,r=void 0!==n&&n,a=e.label,i=e.onClick,c=_()("navigation-bar-item",{"is-selected":r}),u=_()("button","button-borderless","theme-color-fg");return o.a.createElement("div",{className:c},o.a.createElement("button",{type:"button",className:u,onClick:i},o.a.createElement("span",{className:"navigation-bar-item__icon"},t),a))};Q.propTypes={icon:i.a.element.isRequired,isSelected:i.a.bool,label:i.a.string.isRequired,onClick:i.a.func.isRequired};var $=Q;function Z(){return o.a.createElement("svg",{className:"icon-cross-outline-small",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M12.414 11l2.074 2.074-1.414 1.414L11 12.414l-2.074 2.074-1.414-1.414L9.586 11 7.512 8.926l1.414-1.414L11 9.586l2.074-2.074 1.414 1.414L12.414 11zM11 5c-3.308 0-6 2.692-6 6s2.692 6 6 6 6-2.692 6-6-2.692-6-6-6m0-2a8 8 0 1 1 0 16 8 8 0 0 1 0-16z"}))}function J(){return o.a.createElement("svg",{className:"icon-reorder",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M18 7H4V5h14v2zm2 3H2v2h18v-2zm-2 5H4v2h14v-2z"}))}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?ie(e):t}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=ue(t);if(ce()){var r=ue(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ae(this,e)});function c(){var e;ne(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return se(ie(e=i.call.apply(i,[this].concat(n))),"reorderingElement",null),se(ie(e),"reorderingClientY",0),se(ie(e),"reorderingOffsetY",0),se(ie(e),"reorderingTranslateY",0),se(ie(e),"state",{items:[],reorderedItems:[],reorderingId:null}),se(ie(e),"bindReorderingListeners",(function(){e.unbindReorderingListeners(),window.addEventListener("mouseup",e.onReorderEnd),window.addEventListener("touchend",e.onReorderEnd),window.addEventListener("touchcancel",e.onReorderCancel),window.addEventListener("keydown",e.onKeyDown)})),se(ie(e),"unbindReorderingListeners",(function(){window.removeEventListener("mouseup",e.onReorderEnd),window.removeEventListener("touchend",e.onReorderEnd),window.removeEventListener("touchcancel",e.onReorderCancel),window.removeEventListener("keydown",e.onKeyDown)})),se(ie(e),"setReorderingElementRef",(function(t,n){t===e.state.reorderingId&&(e.reorderingElement!==n&&(e.unsetReorderingElement(),e.reorderingTranslateY=0),e.reorderingElement=n,e.bindReorderingListeners(),e.positionReorderingElement())})),se(ie(e),"positionReorderingElement",(function(){if(e.reorderingElement){var t=e.reorderingElement.getBoundingClientRect(),n=e.reorderingClientY-(t.top-e.reorderingTranslateY)-e.reorderingOffsetY;(n<0&&!e.reorderingElement.previousSibling||n>0&&!e.reorderingElement.nextSibling)&&(n=0),e.reorderingTranslateY=n;var r="translateY(".concat(n,"px)");e.reorderingElement.style.transform=r,e.reorderingElement.style.msTransform=r,e.reorderingElement.style.webkitTransform=r}})),se(ie(e),"unsetReorderingElement",(function(){e.unbindReorderingListeners(),e.reorderingElement&&(e.reorderingElement.style.transform="",e.reorderingElement.style.msTransform="",e.reorderingElement.style.webkitTransform="",e.reorderingElement=null)})),se(ie(e),"stopReordering",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.unsetReorderingElement(),t?e.setState({reorderedItems:e.props.items?e.props.items.slice():[],reorderingId:null}):e.setState({reorderingId:null})})),se(ie(e),"reorderItemById",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.props.getItemKey,a=e.state.reorderedItems,i=null,c=null;null===r&&(r=t);for(var u=0;u<a.length;++u){var s=o(a[u]);s===t&&(i=u),s===r&&(c=u)}return e.reorderItemByIndex(i,c+n)})),se(ie(e),"reorderItemByIndex",(function(t,n){if(t!==n&&!(null===t||t<0||null===n||n<0)){var r=e.state.reorderedItems.slice(),o=r.splice(t,1);r.splice.apply(r,[n,0].concat(ee(o))),e.setState({reorderedItems:r})}})),se(ie(e),"onReorderStart",(function(t,n){n.preventDefault(),n.currentTarget.focus();var r=n.clientY||n.touches&&n.touches[0]&&n.touches[0].clientY;e.reorderingClientY=r;var o=n.currentTarget.getBoundingClientRect();e.reorderingOffsetY=r-o.top,e.reorderingTranslateY=0,e.setState({reorderingId:t}),e.bindReorderingListeners()})),se(ie(e),"onReorderMove",(function(t,n){if(e.reorderingElement&&e.props.editing){var r=n.clientY||n.touches&&n.touches[0]&&n.touches[0].clientY;if(e.reorderingClientY=r,t!==e.state.reorderingId){var o=n.currentTarget.getBoundingClientRect(),a=.5*o.height+o.top;e.reorderItemById(e.state.reorderingId,r<a?0:1,t)}e.positionReorderingElement()}})),se(ie(e),"onReorderEnd",(function(t){t.preventDefault(),e.stopReordering(),e.props.onReorder(e.state.reorderedItems)})),se(ie(e),"onReorderCancel",(function(){return e.stopReordering(!0)})),se(ie(e),"onReorderKeyDown",(function(t,n){"ArrowUp"===n.key?(n.preventDefault(),e.reorderItemById(t,-1)):"ArrowDown"===n.key&&(n.preventDefault(),e.reorderItemById(t,1))})),se(ie(e),"onKeyDown",(function(t){27===(t.keyCode||t.which)&&(t.preventDefault(),e.onReorderCancel())})),e}return n=c,(r=[{key:"componentWillMount",value:function(){this.setState({items:this.props.items,reorderedItems:this.props.items?this.props.items.slice():[]})}},{key:"componentWillReceiveProps",value:function(e){e.items!==this.state.items&&(this.stopReordering(),this.setState({items:e.items,reorderedItems:e.items?e.items.slice():[]}))}},{key:"componentWillUnmount",value:function(){this.unbindReorderingListeners()}},{key:"render",value:function(){var e=this,t=this.props,n=t.editing,r=t.onRemove,a=t.onReorder,i=t.sortTagsAlpha,c=this.state,u=c.reorderedItems,s=c.reorderingId,l=_()("editable-list",this.props.className,{"editable-list-editing":this.props.editing,"editable-list-removable":r,"editable-list-reorderable":a,"editable-list-reordering":s});return o.a.createElement("ul",{className:l},u.map((function(t){var c=e.props.getItemKey(t);return o.a.createElement("li",{key:c,ref:e.setReorderingElementRef.bind(e,c),className:_()("editable-list-item",{"editable-list-item-reordering":c===s}),onMouseMove:e.onReorderMove.bind(e,c),onTouchMove:e.onReorderMove.bind(e,c)},o.a.createElement("span",{className:"editable-list-item-left"},r&&o.a.createElement("span",{className:"editable-list-trash",tabIndex:n?0:-1,onClick:r.bind(null,t)},o.a.createElement(Z,null)),o.a.createElement("span",{className:"editable-list-item-content"},e.props.renderItem(t))),a&&!i&&o.a.createElement("span",{className:"editable-list-reorder",tabIndex:n?0:-1,onDragStart:function(e){return e.preventDefault()},onMouseDown:e.onReorderStart.bind(e,c),onTouchStart:e.onReorderStart.bind(e,c),onKeyDown:e.onReorderKeyDown.bind(e,c)},o.a.createElement(J,null)))})))}}])&&re(n.prototype,r),a&&re(n,a),c}(r.Component);se(le,"displayName","EditableList"),se(le,"defaultProps",{getItemKey:function(e){return e.id}});var fe=Object(u.b)((function(e){var t=e.settings.sortTagsAlpha,n=e.tags;return{editing:e.ui.editingTags,items:n,sortTagsAlpha:t}}))(le);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=he(t);if(ye()){var r=he(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return be(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).state={value:e.value},t}return n=c,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.editable,r=t.isSelected,a=t.onClick,i=t.onDone,c=this.state.value,u=_()("tag-list-input","theme-color-fg",{"is-selected":r});return o.a.createElement("input",{className:u,readOnly:!n,onClick:a,value:c,onChange:function(t){return e.setState({value:t.target.value})},onBlur:i,spellCheck:!1})}}])&&de(n.prototype,r),a&&de(n,a),c}(r.Component),ve=n(128);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?Ne(e):t}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=ke(t);if(Te()){var r=ke(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return je(this,e)});function c(){var e;Oe(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _e(Ne(e=i.call.apply(i,[this].concat(n))),"renderItem",(function(t){var n=e.props,r=n.editingTags,a=n.openedTag,i=t.data.name===Object(j.get)(a,"data.name","");return o.a.createElement(ge,{editable:r,isSelected:i,onClick:e.openTag.bind(Ne(e),t),onDone:function(n){var r=n.target.value;return e.props.renameTag({tag:t,name:r})},value:t.data.name})})),_e(Ne(e),"onReorderTags",(function(t){return e.props.reorderTags({tags:t})})),_e(Ne(e),"openTag",(function(t,n){e.props.editingTags||(n.preventDefault(),n.currentTarget.blur(),e.props.openTag(t))})),_e(Ne(e),"onTrashTag",(function(t){e.props.trashTag({tag:t}),K.a.tracks.recordEvent("list_tag_deleted")})),e}return n=c,(r=[{key:"render",value:function(){var e=this.props,t=e.editingTags,n=e.onEditTags,r=e.tags,a=_()("tag-list",{"tag-list-editing":this.props.editingTags});return o.a.createElement("div",{className:a},o.a.createElement("div",{className:"tag-list-title"},o.a.createElement(T.a,{headingLevel:"2"},"Tags"),r.length>0&&o.a.createElement("button",{className:"tag-list-edit-toggle button button-borderless",tabIndex:0,onClick:n},t?"Done":"Edit")),o.a.createElement(fe,{className:"tag-list-items",renderItem:this.renderItem,onRemove:this.onTrashTag,onReorder:this.onReorderTags}))}}])&&we(n.prototype,r),a&&we(n,a),c}(r.Component);_e(Re,"displayName","TagList");var Pe=Object(u.b)((function(e){var t=e.tags,n=e.ui;return{editingTags:n.editingTags,tags:t,openedTag:n.openedTag}}),(function(e){return{onEditTags:function(){return e(Object(ve.toggleTagEditing)())},openTag:function(t){e(Object(ve.openTag)(t)),K.a.tracks.recordEvent("list_tag_viewed")},renameTag:function(t){return e(Object(l.c)(t))},reorderTags:function(t){return e(Object(l.d)(t))},trashTag:function(t){return e(Object(l.e)(t))}}}))(Re);function Ce(){return o.a.createElement("svg",{className:"icon-notes",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M18 4v10H8V4h10m0-2H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zM4 18V6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2H4zM16 6h-6v2h6V6zm0 4h-6v2h6v-2z"}))}function Ae(){return o.a.createElement("svg",{className:"icon-trash",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M18 8.5V18a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8.5h2V18h10V8.5h2zM15 5V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v1H3v2h16V5h-4zM9 4h4v1H9V4zm1 12V8.5H8V16h2zm4 0V8.5h-2V16h2z"}))}function De(){return o.a.createElement("svg",{className:"icon-settings",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M14 21H8v-2.587c-.684-.278-1.33-.652-1.917-1.11L3.84 18.6l-3-5.198 2.242-1.294C3.028 11.734 3 11.364 3 11s.027-.735.08-1.108L.84 8.598l3-5.196 2.244 1.295C6.67 4.24 7.317 3.865 8 3.587V1h6v2.587c.684.278 1.33.653 1.917 1.11l2.243-1.295 3 5.196-2.24 1.294c.053.374.08.744.08 1.108 0 .363-.027.734-.08 1.107l2.24 1.294-3 5.198-2.244-1.296c-.586.458-1.233.833-1.916 1.11V21zm-4-2h2v-2.04l.715-.212c.887-.265 1.718-.745 2.402-1.393l.542-.51 1.768 1.02 1-1.732-1.768-1.02.17-.726c.114-.47.17-.938.17-1.387 0-.45-.057-.916-.17-1.39l-.17-.723 1.768-1.02-1-1.733-1.77 1.022-.54-.512c-.686-.647-1.517-1.128-2.403-1.392L12 5.04V3h-2v2.04l-.715.212c-.887.265-1.718.746-2.4 1.392l-.543.512-1.77-1.022-1 1.73 1.77 1.022-.173.726c-.113.47-.17.94-.17 1.388s.057.916.17 1.39l.17.724-1.768 1.02 1 1.733 1.77-1.02.542.51c.685.647 1.515 1.128 2.402 1.393l.714.21V19zm1-4c-2.206 0-4-1.794-4-4s1.794-4 4-4 4 1.794 4 4-1.794 4-4 4zm0-6c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2z"}))}function Le(){return o.a.createElement("svg",{className:"icon-alert",xmlns:"http://www.w3.org/2000/svg",width:"12px",height:"12px",viewBox:"0 0 12 12"},o.a.createElement("path",{d:"M6,1.2 C8.6466,1.2 10.8,3.3534 10.8,6 C10.8,8.6466 8.6466,10.8 6,10.8 C3.3534,10.8 1.2,8.6466 1.2,6 C1.2,3.3534 3.3534,1.2 6,1.2 L6,1.2 Z M6,-8.8817842e-16 C2.6862,-8.8817842e-16 0,2.6862 0,6 C0,9.3138 2.6862,12 6,12 C9.3138,12 12,9.3138 12,6 C12,2.6862 9.3138,-8.8817842e-16 6,-8.8817842e-16 L6,-8.8817842e-16 Z M6.6,7.8 L5.4,7.8 L5.4,9 L6.6,9 L6.6,7.8 Z M5.4,6.6 L6.6,6.6 L6.9,3 L5.1,3 L5.4,6.6 Z"}))}function Ie(){return o.a.createElement("svg",{className:"icon-sync",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"12px",viewBox:"0 0 18 12"},o.a.createElement("path",{d:"M17.625,7.125 L15.3105,9.4395 L14.25,10.5 L10.875,7.125 L11.9355,6.0645 L13.5,7.629 L13.5,6 C13.5,3.519 11.481,1.5 9,1.5 L9,0 C12.3135,0 15,2.6865 15,6 L15,7.629 L16.5645,6.0645 L17.625,7.125 Z M4.5,6 L4.5,4.371 L6.0645,5.9355 L7.125,4.875 L3.75,1.5 L2.6895,2.5605 L0.375,4.875 L1.4355,5.9355 L3,4.371 L3,6 C3,9.3135 5.6865,12 9,12 L9,10.5 C6.519,10.5 4.5,8.481 4.5,6 Z"}))}var xe=n(1094),Me=n(1114),Be=Object(j.debounce)((function(e){if(!Object(j.startsWith)(e,"h:"))try{window.localStorage.setItem("lastSyncedTime",Date.now())}catch(e){}}),500),He=n(394),Ue=n(302),Fe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!t)return[];var r=new Set(e),o=Object(He.a)(t,(function(e){var t=e.id;return r.has(t)}),n);return o.map((function(e){return{id:e.id,title:Object(Ue.a)(e).title}}))};function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Ye(t);if(Ke()){var r=Ye(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return We(this,e)});function c(){return Ge(this,c),i.apply(this,arguments)}return n=c,(r=[{key:"render",value:function(){var e=this.props,t=e.anchorEl,n=e.id,r=e.notes,a=e.onClose,i=e.theme,c=e.unsyncedNoteIds,u="theme-".concat(i),s=Boolean(t),l=c.length>0,f=l?Fe(c,r,10):[],p=c.length-f.length,d=1===p?"note":"notes",m=function(){try{return parseFloat(window.localStorage.getItem("lastSyncedTime"))}catch(e){return-1/0}}();return o.a.createElement(Me.a,{id:n,className:_()("sync-status-popover",u),classes:{paper:_()("sync-status-popover__paper","theme-color-bg","theme-color-border","theme-color-fg-dim",{"has-unsynced-changes":l})},open:s,anchorEl:t,anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"center"},onBlur:a,onClose:a,PaperProps:{square:!0},disableRestoreFocus:!0},l&&o.a.createElement("div",{className:"sync-status-popover__unsynced theme-color-border"},o.a.createElement("h2",{className:"sync-status-popover__heading"},"Notes with unsynced changes"),o.a.createElement("ul",{className:"sync-status-popover__notes theme-color-fg"},f.map((function(e){return o.a.createElement("li",{key:e.id},e.title)}))),!!p&&o.a.createElement("p",null,"and ",p," more ",d),o.a.createElement("div",null,"If a note isn’t syncing, try switching networks or editing the note again.")),m>-1/0?o.a.createElement("span",null,"Last synced:"," ",Object(xe.a)(m,{addSuffix:!0})):o.a.createElement("span",null,"Unknown sync status"))}}])&&Ve(n.prototype,r),a&&Ve(n,a),c}(o.a.Component),$e=Object(u.b)((function(e){var t=e.appState,n=e.settings,r=e.ui.unsyncedNoteIds;return{notes:t.notes,theme:n.theme,unsyncedNoteIds:r}}))(Qe);function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?nt(e):t}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=ot(t);if(rt()){var r=ot(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return tt(this,e)});function c(){var e;Je(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return at(nt(e=i.call.apply(i,[this].concat(n))),"state",{anchorEl:null}),at(nt(e),"handlePopoverOpen",(function(t){e.setState({anchorEl:t.currentTarget})})),at(nt(e),"handlePopoverClose",(function(){e.setState({anchorEl:null})})),e}return n=c,(r=[{key:"render",value:function(){var e=this.props,t=e.simperiumConnected,n=e.unsyncedNoteIds,r=this.state.anchorEl,a=n.length,i=1===a?"change":"changes",c=a?"".concat(a," unsynced ").concat(i):t?"All changes synced":"No connection";return o.a.createElement("div",null,o.a.createElement("div",{className:"sync-status","aria-owns":r?"sync-status__popover":void 0,"aria-haspopup":"true",onFocus:this.handlePopoverOpen,onMouseEnter:this.handlePopoverOpen,onMouseLeave:this.handlePopoverClose,tabIndex:"0"},o.a.createElement("span",{className:"sync-status__icon"},t?o.a.createElement(Ie,null):o.a.createElement(Le,null)),c),o.a.createElement($e,{anchorEl:r,id:"sync-status__popover",onClose:this.handlePopoverClose}))}}])&&Xe(n.prototype,r),a&&Xe(n,a),c}(r.Component),ct=Object(u.b)((function(e){var t=e.ui;return{simperiumConnected:t.simperiumConnected,unsyncedNoteIds:t.unsyncedNoteIds}}))(it),ut=n(27);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?mt(e):t}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(u,e);var t,n,a,i,c=(t=u,function(){var e,n=yt(t);if(bt()){var r=yt(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return dt(this,e)});function u(){var e;lt(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ht(mt(e=c.call.apply(c,[this].concat(n))),"handleClickOutside",(function(){var t=e.props,n=t.isDialogOpen,r=t.onOutsideClick,o=t.showNavigation;n||o&&r()})),ht(mt(e),"onHelpClicked",(function(){return Object(ut.a)("http://simplenote.com/help")})),ht(mt(e),"onSelectTrash",(function(){e.props.selectTrash(),K.a.tracks.recordEvent("list_trash_viewed")})),ht(mt(e),"isSelected",(function(t){var n=t.isTrashRow,r=e.props,o=r.showTrash,a=r.openedTag;return n===o&&!a})),e}return n=u,(a=[{key:"render",value:function(){var e=this.props,t=e.autoHideMenuBar,n=e.onAbout,a=e.onSettings,i=e.onShowAllNotes;return o.a.createElement("div",{className:"navigation-bar theme-color-bg theme-color-fg theme-color-border"},o.a.createElement("div",{className:"navigation-bar__folders"},o.a.createElement($,{icon:o.a.createElement(Ce,null),isSelected:this.isSelected({isTrashRow:!1}),label:"All Notes",onClick:i}),o.a.createElement($,{icon:o.a.createElement(Ae,null),isSelected:this.isSelected({isTrashRow:!0}),label:"Trash",onClick:this.onSelectTrash})),o.a.createElement("div",{className:"navigation-bar__tags theme-color-border"},o.a.createElement(Pe,null)),(!Y.a||t)&&o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"navigation-bar__tools theme-color-border"},o.a.createElement($,{icon:o.a.createElement(De,null),label:"Settings",onClick:a})),o.a.createElement("div",{className:"navigation-bar__footer"},o.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:this.props.showKeyboardShortcuts},"Keyboard Shortcuts")),o.a.createElement("div",{className:"navigation-bar__footer"},o.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:this.onHelpClicked},"Help & Support"),o.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:n},"About"))),o.a.createElement("div",{className:"navigation-bar__sync-status theme-color-fg-dim theme-color-border"},o.a.createElement(ct,null)))}}])&&ft(n.prototype,a),i&&ft(n,i),u}(r.Component);ht(gt,"displayName","NavigationBar");var vt=s.a.actionCreators.showAllNotesAndSelectFirst,Et={onAbout:function(){return Object(ve.showDialog)("ABOUT")},onOutsideClick:ve.toggleNavigation,onShowAllNotes:vt,onSettings:function(){return Object(ve.showDialog)("SETTINGS")},selectTrash:ve.selectTrash,showKeyboardShortcuts:function(){return Object(ve.showDialog)("KEYBINDINGS")}},Ot=Object(u.b)((function(e){var t=e.settings,n=e.ui,r=n.dialogs,o=n.openedTag,a=n.showNavigation,i=n.showTrash;return{autoHideMenuBar:t.autoHideMenuBar,isDialogOpen:r.length>0,openedTag:o,showNavigation:a,showTrash:i}}),Et)(Object(S.a)(gt)),wt=n(253);function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e,t){return!t||"object"!==St(t)&&"function"!=typeof t?Rt(e):t}function Rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(c,e);var t,n,o,a,i=(t=c,function(){var e,n=Ct(t);if(Pt()){var r=Ct(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return _t(this,e)});function c(){var e;Nt(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return At(Rt(e=i.call.apply(i,[this].concat(n))),"onTrashNote",(function(t){var n=e.props.noteBucket;e.props.trashNote({noteBucket:n,note:t}),K.a.tracks.recordEvent("editor_note_deleted")})),At(Rt(e),"onDeleteNoteForever",(function(t){var n=e.props.noteBucket;e.props.deleteNoteForever({noteBucket:n,note:t})})),At(Rt(e),"onRestoreNote",(function(t){var n=e.props.noteBucket;e.props.restoreNote({noteBucket:n,note:t}),K.a.tracks.recordEvent("editor_note_restored")})),At(Rt(e),"onShareNote",(function(){e.props.shareNote(),K.a.tracks.recordEvent("editor_share_dialog_viewed")})),e}return n=c,(o=[{key:"render",value:function(){var e=this.props,t=e.isViewingRevisions,n=e.toolbar,o={onDeleteNoteForever:this.onDeleteNoteForever,onRestoreNote:this.onRestoreNote,onShareNote:this.onShareNote,onTrashNote:this.onTrashNote,toggleFocusMode:this.props.toggleFocusMode};return t?null:Object(r.cloneElement)(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){At(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o))}}])&&Tt(n.prototype,o),a&&Tt(n,a),c}(r.Component),Lt=s.a.actionCreators,It=Lt.deleteNoteForever,xt=Lt.restoreNote,Mt=Lt.trashNote,Bt=Object(u.b)((function(e){var t=e.ui,n=t.filteredNotes;return{isViewingRevisions:t.showRevisions,notes:n}}),(function(e){return{deleteNoteForever:function(t){return e(It(t))},restoreNote:function(t){return e(xt(t))},shareNote:function(){return e(Object(ve.showDialog)("SHARE"))},toggleFocusMode:function(){return e(Object(wt.toggleFocusMode)())},trashNote:function(t){return e(Mt(t))}}}))(Dt),Ht=n(1115);function Ut(){return(Ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ft(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var zt=function(e){var t=e.icon,n=e.title,r=Ft(e,["icon","title"]);return o.a.createElement(Ht.a,{classes:{tooltip:"icon-button__tooltip"},enterDelay:200,title:n},o.a.createElement("button",Ut({className:"icon-button",type:"button","data-title":n},r),t))};zt.propTypes={disableTooltip:i.a.bool,icon:i.a.element.isRequired,title:i.a.string.isRequired};var Gt=zt;function Vt(){return o.a.createElement("svg",{className:"icon-back",xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M19 10H6.414l5.293-5.293-1.414-1.414L2.586 11l7.707 7.707 1.414-1.414L6.414 12H19z"}))}function qt(){return o.a.createElement("svg",{className:"icon-info",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M11 4c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.14-7-7 3.14-7 7-7m0-2a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm1 8h-2v6h2v-6zm-1-4a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"}))}function Wt(){return o.a.createElement("svg",{className:"icon-preview",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M11,4C4.19,4,0,11,0,11s4.19,7,11,7,11-7,11-7S17.81,4,11,4Zm0,12c-4.13,0-7.22-3.29-8.56-5A14.22,14.22,0,0,1,7.39,6.84a4.5,4.5,0,1,0,7.23,0A14.44,14.44,0,0,1,19.56,11C18.23,12.73,15.16,16,11,16Z"}))}function Kt(){return o.a.createElement("svg",{className:"icon-preview-stop",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M0,11S4.19,4,11,4a10.09,10.09,0,0,1,3.4.6L7.17,11.83a4.42,4.42,0,0,1,.22-5A14.22,14.22,0,0,0,2.44,11a16.27,16.27,0,0,0,2.77,2.79L3.78,15.22A18,18,0,0,1,0,11Zm22,0s-4.19,7-11,7a10.13,10.13,0,0,1-3.4-.6L4,21,2.5,19.5l3.06-3.06L7,15l1.64-1.64,6.16-6.16L15,7l1.48-1.48L19.5,2.5,21,4,18.22,6.78A18,18,0,0,1,22,11Zm-2.44,0a16.27,16.27,0,0,0-2.77-2.79L15.5,9.5A4.5,4.5,0,0,1,11,14L9.21,15.79A7.9,7.9,0,0,0,11,16C15.16,16,18.23,12.73,19.56,11Z"}))}function Yt(){return o.a.createElement("svg",{className:"icon-revisions",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M8.7,14.7l3.3-3.3V6h-2v4.6l-2.7,2.7L8.7,14.7z M11,2c5,0,9,4,9,9h-2c0-3.9-3.1-7-7-7s-7,3.1-7,7s3.1,7,7,7c2.4,0,4.5-1.2,5.7-3H13v-2h7v7h-2v-3.3c-1.6,2-4.2,3.3-7,3.3c-5,0-9-4-9-9S6,2,11,2z"}))}function Qt(){return o.a.createElement("svg",{className:"icon-share",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M7.707 7.707L6.293 6.293 11 1.586l4.707 4.707-1.414 1.414L12 5.414V13h-2V5.414L7.707 7.707zM17 9v9H5V9H3v11h16V9h-2z"}))}function $t(){return o.a.createElement("svg",{className:"icon-sidebar",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M19,3H3C1.895,3,1,3.895,1,5v12c0,1.105,0.895,2,2,2h16c1.105,0,2-0.895,2-2V5C21,3.895,20.105,3,19,3z M3,5h3v12H3V5z M19,17H8V5h11V17z"}))}function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tn(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?nn(e):t}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function an(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=on(t);if(rn()){var r=on(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return tn(this,e)});function c(){var e;Jt(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return an(nn(e=i.call.apply(i,[this].concat(n))),"renderNormal",(function(){var t=e.props,n=t.editMode,r=t.markdownEnabled,a=t.note,i=t.toggleNoteInfo;return a?o.a.createElement("div",{className:"note-toolbar"},o.a.createElement("div",{className:"note-toolbar__column-left"},o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Gt,{icon:o.a.createElement($t,null),onClick:e.props.toggleFocusMode,title:"Toggle Sidebar"}))),o.a.createElement("div",{className:"note-toolbar__column-right"},o.a.createElement("div",{className:"note-toolbar__button note-toolbar-back"},o.a.createElement(Gt,{icon:o.a.createElement(Vt,null),onClick:e.props.toggleNoteList,title:"Back • Ctrl+Shift+L"})),r&&o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Gt,{icon:n?o.a.createElement(Wt,null):o.a.createElement(Kt,null),onClick:e.props.toggleEditMode,title:"Preview • Ctrl+Shift+P"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Gt,{icon:o.a.createElement(Yt,null),onClick:e.props.toggleRevisions,title:"History"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Gt,{icon:o.a.createElement(Qt,null),onClick:e.props.onShareNote.bind(null),title:"Share"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Gt,{icon:o.a.createElement(Ae,null),onClick:e.props.onTrashNote.bind(null,a),title:"Trash • Ctrl+Delete"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Gt,{icon:o.a.createElement(qt,null),onClick:i,title:"Info"})))):o.a.createElement("div",{className:"note-toolbar-placeholder theme-color-border"})})),an(nn(e),"renderTrashed",(function(){var t=e.props.note;return o.a.createElement("div",{className:"note-toolbar-trashed"},o.a.createElement("div",{className:"note-toolbar__column-left"},o.a.createElement(Gt,{icon:o.a.createElement(Vt,null),onClick:e.props.toggleNoteList,title:"Back • Ctrl+Shift+L"})),o.a.createElement("div",{className:"note-toolbar__column-right"},o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement("button",{type:"button",className:"button button-compact button-danger",onClick:e.props.onDeleteNoteForever.bind(null,t)},"Delete Forever")),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement("button",{type:"button",className:"button button-primary button-compact",onClick:e.props.onRestoreNote.bind(null,t)},"Restore Note"))))})),e}return n=c,(r=[{key:"render",value:function(){var e=this.props.note,t=!(!e||!e.data.deleted);return o.a.createElement("div",{className:"note-toolbar-wrapper theme-color-border"},t?this.renderTrashed():this.renderNormal())}}])&&Xt(n.prototype,r),a&&Xt(n,a),c}(r.Component);an(cn,"displayName","NoteToolbar"),an(cn,"propTypes",{onRestoreNote:i.a.func,onTrashNote:i.a.func,onDeleteNoteForever:i.a.func,onShareNote:i.a.func,toggleFocusMode:i.a.func.isRequired}),an(cn,"defaultProps",{onDeleteNoteForever:j.noop,onRestoreNote:j.noop,onShareNote:j.noop,onTrashNote:j.noop,toggleFocusMode:j.noop});var un={toggleEditMode:ve.toggleEditMode,toggleNoteInfo:ve.toggleNoteInfo,toggleNoteList:ve.toggleNoteList,toggleRevisions:ve.toggleRevisions},sn=Object(u.b)((function(e){var t=e.ui,n=t.note,r=t.editMode,o=t.selectedRevision||n;return{editMode:r,markdownEnabled:!!o&&o.data.systemTags.includes("markdown"),note:n}}),un)(cn),ln=function(e){var t=e.min,n=e.max,r=e.value,a=e.onChange;return o.a.createElement("input",{className:"slider",type:"range",min:t,max:n,value:r,onChange:a})},fn=n(224);function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t){return(bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yn(e,t){return!t||"object"!==pn(t)&&"function"!=typeof t?hn(e):t}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function vn(e){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function En(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On=function(e){return Object(j.orderBy)(e,"version","asc")},wn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bn(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=vn(t);if(gn()){var r=vn(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return yn(this,e)});function c(e){var t;dn(this,c);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return En(hn(t=i.call.apply(i,[this,e].concat(r))),"handleClickOutside",(function(){return t.onCancelRevision()})),En(hn(t),"onAcceptRevision",(function(){var e=t.props,n=e.note,r=e.onUpdateContent,o=e.resetIsViewingRevisions,a=t.state,i=a.revisions[a.selection];if(i){var c=i.data,u=c.content,s=c.tags;r(n,u,!0),t.props.updateNoteTags({note:n,tags:s}),o()}t.resetSelection()})),En(hn(t),"resetSelection",(function(){return t.setState({selection:1/0})})),En(hn(t),"onSelectRevision",(function(e){var n=e.target.value,r=t.state.revisions,o=parseInt(n,10),a=r[o];t.setState({selection:o}),t.props.setRevision(a||null)})),En(hn(t),"onCancelRevision",(function(){t.props.cancelRevision(),t.resetSelection()})),t.state={revisions:On(e.revisions),selection:1/0},t}return n=c,(r=[{key:"componentWillReceiveProps",value:function(e){var t=e.revisions;t!==this.props.revisions&&this.setState({revisions:On(t)})}},{key:"componentDidUpdate",value:function(e){e.revisions!==this.props.revisions&&this.forceUpdate()}},{key:"render",value:function(){var e=this.props.isViewingRevisions;if(!e)return null;var t=this.state,n=t.revisions,r=t.selection,a=Math.max(n.length-1,1),i=Math.min(r,a),c=n.length&&i!==a?Object(N.a)(1e3*n[i].data.modificationDate,"MMM d, yyyy h:mm a"):"Latest",u=i===a?{opacity:"0.5",pointerEvents:"none"}:{},s=_()("revision-selector",{"is-visible":e});return o.a.createElement("div",{className:s},o.a.createElement("div",{className:"revision-date"},c),o.a.createElement("div",{className:"revision-slider"},o.a.createElement(ln,{min:0,max:a,value:i,onChange:this.onSelectRevision})),o.a.createElement("div",{className:"revision-buttons"},o.a.createElement("button",{className:"button button-secondary button-compact",onClick:this.onCancelRevision},"Cancel"),o.a.createElement("button",{style:u,className:"button button-primary button-compact",onClick:this.onAcceptRevision},"Restore Note")))}}])&&mn(n.prototype,r),a&&mn(n,a),c}(r.Component),Sn=Object(u.b)((function(e){var t=e.ui,n=t.note,r=t.noteRevisions;return{isViewingRevisions:t.showRevisions,note:n,revisions:r}}),(function(e){return{setRevision:function(t){return e(Object(ve.selectRevision)(t))},resetIsViewingRevisions:function(){return e(Object(ve.toggleRevisions)())},cancelRevision:function(){return e(Object(ve.toggleRevisions)())},updateNoteTags:function(t){return e(Object(fn.b)(t))}}}))(Object(S.a)(wn));function jn(){return o.a.createElement("svg",{className:"icon-new-note",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M19 10v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7v2H5v12h12v-7h2zm3-7h-3V0h-2v3h-3v2h3v3h2V5h3V3zm-7 5H7v2h8V8zm0 4H7v2h8v-2z"}))}function Nn(){return o.a.createElement("svg",{className:"icon-cross-small",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M16.707 6.707l-1.414-1.414L11 9.586 6.707 5.293 5.293 6.707 9.586 11l-4.293 4.293 1.414 1.414L11 12.414l4.293 4.293 1.414-1.414L12.414 11z"}))}var Tn=new Set,kn=function(){return function(e){return function(t){var n=e(t);switch(t.type){case"SEARCH":Tn.forEach((function(e){return e()}));break;case"FOCUS_SEARCH_FIELD":Tn.forEach((function(e){return e("select")}))}return n}}};function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e,t){return(Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function An(e,t){return!t||"object"!==_n(t)&&"function"!=typeof t?Dn(e):t}function Dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ln(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cn(e,t)}(u,e);var t,n,a,i,c=(t=u,function(){var e,n=In(t);if(Ln()){var r=In(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return An(this,e)});function u(){var e;Rn(this,u);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return xn(Dn(e=c.call.apply(c,[this].concat(n))),"inputField",Object(r.createRef)()),xn(Dn(e),"blur",(function(){e.inputField.current&&e.inputField.current.blur()})),xn(Dn(e),"focus",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"focus-only";e.inputField.current&&("select"===t&&e.inputField.current.select(),e.inputField.current.focus())})),xn(Dn(e),"interceptEsc",(function(t){27===t.keyCode&&(""===e.props.searchQuery&&e.blur(),e.clearQuery())})),xn(Dn(e),"update",(function(t){var n=t.currentTarget.value;e.props.onSearch(n)})),xn(Dn(e),"clearQuery",(function(){return e.props.onSearch("")})),e}return n=u,(a=[{key:"componentDidMount",value:function(){var e;e=this.focus,Tn.add(e)}},{key:"render",value:function(){var e=this.props,t=e.searchQuery,n=e.isTagSelected,r=e.placeholder,a=t.length>0,i="Search "+(n?"notes with tag ":"")+r;return o.a.createElement("div",{className:"search-field"},o.a.createElement("input",{"aria-label":i,ref:this.inputField,type:"text",placeholder:r,onChange:this.update,onKeyUp:this.interceptEsc,value:t,spellCheck:!1}),o.a.createElement("button",{"aria-label":"Clear search",hidden:!a,onClick:this.clearQuery},o.a.createElement(Nn,null)))}}])&&Pn(n.prototype,a),i&&Pn(n,i),u}(r.Component);xn(Mn,"displayName","SearchField");var Bn=Object(u.b)((function(e){var t=e.ui,n=t.listTitle;return{isTagSelected:!!t.openedTag,placeholder:n,searchQuery:t.searchQuery}}),(function(e){return{onSearch:function(t){e(Object(ve.search)(t)),K.a.tracks.recordEvent("list_notes_searched")}}}))(Mn);function Hn(){return o.a.createElement("svg",{className:"icon-menu",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},o.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M21,11H3v2H21Zm0-5H3V8H21Zm0,10H3v2H21Z"})))}var Un=n(202),Fn=s.a.actionCreators.newNote,zn=function(e){var t=e.onNewNote,n=e.searchQuery,r=e.showTrash,a=e.toggleNavigation;return o.a.createElement("div",{className:"search-bar theme-color-border"},o.a.createElement(Gt,{icon:o.a.createElement(Hn,null),onClick:a,title:"Menu • Ctrl+Shift+T"}),o.a.createElement(Bn,null),o.a.createElement(Gt,{disabled:r,icon:o.a.createElement(jn,null),onClick:function(){return t(Object(Un.d)(n))},title:"New Note • Ctrl+Shift+N"}))};zn.displayName="SearchBar";var Gn=Object(u.b)((function(e){var t=e.ui;return{searchQuery:t.searchQuery,showTrash:t.showTrash}}),(function(e,t){var n=t.noteBucket;return{onNewNote:function(t){e(Fn({noteBucket:n,content:t})),K.a.tracks.recordEvent("list_note_created")},toggleNavigation:function(){e(Object(ve.toggleNavigation)())}}}))(zn),Vn=n(395),qn=n(1105);function Wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yn=function(e){var t=e.children,n=e.delay,a=void 0===n?1e3:n,i=Wn(Object(r.useState)(!1),2),c=i[0],u=i[1];return Object(r.useEffect)((function(){var e=window.setTimeout((function(){u(!0)}),a);return function(){return window.clearTimeout(e)}}),[]),o.a.createElement(qn.a,{classNames:"transition-delay-enter",in:c,mountOnEnter:!0,timeout:200,unmountOnExit:!0},t)};function Qn(e){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xn(e,t){return!t||"object"!==Qn(t)&&"function"!=typeof t?er(e):t}function er(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var or=o.a.lazy((function(){return Promise.all([n.e(7),n.e(2)]).then(n.bind(null,1116))})),ar=o.a.lazy((function(){return Promise.all([n.e(6),n.e(1)]).then(n.bind(null,1112))})),ir=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(u,e);var t,n,a,i,c=(t=u,function(){var e,n=nr(t);if(tr()){var r=nr(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Xn(this,e)});function u(){var e;$n(this,u);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return rr(er(e=c.call.apply(c,[this].concat(n))),"openKeybindingsHelp",(function(t){var n=e.props,r=n.hideKeyboardShortcuts,o=n.keyboardShortcutsAreOpen,a=n.showKeyboardShortcuts,i=t.ctrlKey,c=t.code,u=t.metaKey;(i||u)&&"Slash"===c&&(o?r():a(),t.stopPropagation(),t.preventDefault())})),rr(er(e),"render",(function(){var t=e.props,n=t.showNoteList,a=t.isFocusMode,i=void 0!==a&&a,c=t.isNavigationOpen,u=t.isNoteInfoOpen,s=t.isNoteOpen,l=t.isSmallScreen,f=t.noteBucket,p=t.onUpdateContent,d=t.syncNote,m=_()("app-layout",{"is-focus-mode":i,"is-navigation-open":c,"is-note-open":s,"is-showing-note-info":u}),b=!(n&&l),y=o.a.createElement(Yn,{delay:1e3},o.a.createElement("div",{className:"app-layout__placeholder"},o.a.createElement(Vn.a,null)));return o.a.createElement("div",{className:m},o.a.createElement(r.Suspense,{fallback:y},o.a.createElement("div",{className:"app-layout__source-column theme-color-bg theme-color-fg"},o.a.createElement(Gn,{noteBucket:f}),o.a.createElement(or,{noteBucket:f,isSmallScreen:l})),b&&o.a.createElement("div",{className:"app-layout__note-column theme-color-bg theme-color-fg theme-color-border"},o.a.createElement(Sn,{onUpdateContent:p}),o.a.createElement(Bt,{noteBucket:f,toolbar:o.a.createElement(sn,null)}),o.a.createElement(ar,{isSmallScreen:l,noteBucket:f,onUpdateContent:p,syncNote:d}))))})),e}return n=u,(a=[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.openKeybindingsHelp,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.openKeybindingsHelp,!1)}}])&&Zn(n.prototype,a),i&&Zn(n,i),u}(r.Component),cr={hideKeyboardShortcuts:function(){return L.a.ui.closeDialog("KEYBINDINGS")},showKeyboardShortcuts:function(){return L.a.ui.showDialog("KEYBINDINGS")}},ur=Object(u.b)((function(e){var t=e.ui,n=t.dialogs,r=t.showNoteList;return{keyboardShortcutsAreOpen:n.includes("KEYBINDINGS"),isNoteOpen:!r,showNoteList:r}}),cr)(ir),sr=function(){return o.a.createElement("div",{className:"dev-badge"},"DEV")},lr=n(397),fr=n.n(lr),pr=n(33);function dr(){return o.a.createElement("svg",{className:"icon-arrow-top-right",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M6.075 17.364L15 8.464V16h2V5H6v2h7.536L4.65 15.925z"}))}function mr(e){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e,t){return(hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gr(e,t){return!t||"object"!==mr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Er(e){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Or,wr,Sr,jr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hr(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Er(t);if(vr()){var r=Er(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return gr(this,e)});function c(){return br(this,c),i.apply(this,arguments)}return n=c,(r=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.closeBtnLabel,r=void 0===n?"Done":n,a=e.hideTitleBar,i=e.title,c=e.children,u=e.onDone;return o.a.createElement("div",{className:_()(t,"dialog theme-color-bg theme-color-fg theme-color-border")},!a&&o.a.createElement("div",{className:"dialog-title-bar theme-color-border"},o.a.createElement("div",{className:"dialog-title-side"}),o.a.createElement("h2",{className:"dialog-title-text"},i),o.a.createElement("div",{className:"dialog-title-side"},!!u&&o.a.createElement("button",{type:"button","aria-label":"Close dialog",className:"button button-borderless",onClick:u},r))),o.a.createElement("div",{className:"dialog-content"},c))}}])&&yr(n.prototype,r),a&&yr(n,a),c}(r.Component);Or=jr,wr="propTypes",Sr={children:i.a.node.isRequired,className:i.a.string,closeBtnLabel:i.a.string,hideTitleBar:i.a.bool,title:i.a.string,onDone:i.a.func},wr in Or?Object.defineProperty(Or,wr,{value:Sr,enumerable:!0,configurable:!0,writable:!0}):Or[wr]=Sr;var Nr=jr;function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rr(e,t){return(Rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pr(e,t){return!t||"object"!==Tr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ar(e){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rr(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Ar(t);if(Cr()){var r=Ar(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Pr(this,e)});function c(){return kr(this,c),i.apply(this,arguments)}return n=c,(r=[{key:"render",value:function(){var e=this.props.closeDialog,t=(new Date).getFullYear();return o.a.createElement("div",{className:"about"},o.a.createElement(Nr,{hideTitleBar:!0,onDone:e,title:"About"},o.a.createElement("div",{className:"about-top"},o.a.createElement(pr.a,null),o.a.createElement("h1",null,"Simplenote"),o.a.createElement("small",null,"Version ","1.16.0-2066")),o.a.createElement("ul",{className:"about-links"},o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://simplenote.com/blog/",rel:"noopener noreferrer"},o.a.createElement("span",{className:"about-links-title"},"Blog"),o.a.createElement("br",null),"simplenote.com/blog/"),o.a.createElement(dr,null)),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://twitter.com/simplenoteapp",rel:"noopener noreferrer"},o.a.createElement("span",{className:"about-links-title"},"Twitter"),o.a.createElement("br",null),"@simplenoteapp"),o.a.createElement(dr,null)),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/Automattic/simplenote-electron",rel:"noopener noreferrer"},o.a.createElement("span",{className:"about-links-title"},"Contribute"),o.a.createElement("br",null),"GitHub.com"),o.a.createElement(dr,null)),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://automattic.com/work-with-us/",rel:"noopener noreferrer"},"Made with love by the folks at Automattic.",o.a.createElement("br",null),"Are you a developer? We’re hiring."),o.a.createElement(dr,null))),o.a.createElement("div",{className:"about-bottom"},o.a.createElement("p",null,o.a.createElement("a",{target:"_blank",href:"https://simplenote.com/privacy/",rel:"noopener noreferrer"},"Privacy Policy")," "," • "," ",o.a.createElement("a",{target:"_blank",href:"https://simplenote.com/terms/",rel:"noopener noreferrer"},"Terms of Service")),o.a.createElement("p",null,o.a.createElement("a",{target:"_blank",href:"https://automattic.com/",rel:"noopener noreferrer"},"© ",t," Automattic, Inc."))),o.a.createElement("button",{type:"button","aria-label":"Close dialog",className:"about-done button button-borderless",onClick:e},o.a.createElement(D,null))))}}])&&_r(n.prototype,r),a&&_r(n,a),c}(r.Component),Lr={closeDialog:ve.closeDialog},Ir=Object(u.b)(null,Lr)(Dr),xr=function(e){var t=e.items,n=e.onClickItem;return o.a.createElement("ul",{className:"button-group"},t.map((function(e){return o.a.createElement("li",{key:e.slug,className:"button-group__item theme-color-border"},o.a.createElement("button",{type:"button",onClick:function(){return n(e)}},e.name))})))};xr.propTypes={items:i.a.array.isRequired,onClickItem:i.a.func.isRequired};var Mr=xr,Br=[{name:"Evernote",slug:"evernote",acceptedTypes:".enex",electronOnly:!0,instructions:"Choose an Evernote export file (.enex)",optionsHint:"Images and other media will not be imported."},{name:"Simplenote",slug:"simplenote",acceptedTypes:".json",instructions:"Choose a Simplenote export file (.json)"},{name:"Plain text files",slug:"plaintext",acceptedTypes:".txt",instructions:"Choose one or more plain text files (.txt)",multiple:!0}],Hr=function(e){var t=e.selectSource;return o.a.createElement(r.Fragment,null,o.a.createElement(T.a,{headingLevel:"3"},"Import from"),o.a.createElement(Mr,{items:Y.a?Br:Object(j.reject)(Br,(function(e){return e.electronOnly})),onClickItem:function(e){return t(e)}}))};Hr.propTypes={selectSource:i.a.func.isRequired};var Ur=Hr,Fr=n(307),zr=n(43);function Gr(e){return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wr(e,t){return(Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kr(e,t){return!t||"object"!==Gr(t)&&"function"!=typeof t?Yr(e):t}function Yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $r(e){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jr=o.a.lazy((function(){return Promise.all([n.e(9),n.e(3)]).then(n.bind(null,1113))})),Xr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}(u,e);var t,n,a,i,c=(t=u,function(){var e,n=$r(t);if(Qr()){var r=$r(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Kr(this,e)});function u(){var e;Vr(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zr(Yr(e=c.call.apply(c,[this].concat(n))),"state",{importStarted:!1,selectedSource:void 0}),e}return n=u,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.buckets,a=t.closeDialog,i=this.state,c=i.importStarted,u=i.selectedSource,s=Boolean(u),l=o.a.createElement(Yn,{delay:1e3},o.a.createElement("div",{className:"import__placeholder"},o.a.createElement(zr.a,{size:60})));return o.a.createElement(Nr,{className:"import",closeBtnLabel:c?"":"Cancel",onDone:c?void 0:a,title:"Import Notes"},o.a.createElement("div",{className:"import__inner"},!s&&o.a.createElement(Ur,{locked:c,selectSource:function(t){return e.setState({selectedSource:t})}}),o.a.createElement(Fr.a,{wrapperClassName:"import__source-importer-wrapper",shouldMount:s},o.a.createElement(r.Suspense,{fallback:l},o.a.createElement(Jr,{buckets:n,locked:c,onClose:a,onStart:function(){return e.setState({importStarted:!0})},source:u})))))}}])&&qr(n.prototype,a),i&&qr(n,i),u}(r.Component);Zr(Xr,"propTypes",{buckets:i.a.object});var eo={closeDialog:ve.closeDialog},to=Object(u.b)(null,eo)(Xr);function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ro(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ao(e,t){return(ao=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function io(e,t){return!t||"object"!==no(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function co(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function uo(e){return(uo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var so=function(e){var t=e.keys,n=e.children;return o.a.createElement("div",{className:"keybindings__key-item"},o.a.createElement("div",{className:"keybindings__key-list"},t.map((function(e,t){return o.a.createElement(r.Fragment,{key:t},t>0&&" + ","string"==typeof e?o.a.createElement("kbd",{key:e},e):o.a.createElement(o.a.Fragment,null,o.a.createElement("kbd",null,e[0])," / ",o.a.createElement("kbd",null,e[1])))})))," - ",o.a.createElement("div",{className:"keybindings__key-description"},n))},lo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ao(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=uo(t);if(co()){var r=uo(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return io(this,e)});function c(){return ro(this,c),i.apply(this,arguments)}return n=c,(r=[{key:"render",value:function(){var e=this.props.closeDialog,t=Y.b?"Cmd":"Ctrl";return o.a.createElement("div",{className:"keybindings"},o.a.createElement(Nr,{onDone:e,title:"Keyboard Shortcuts"},o.a.createElement("div",{className:"keybindings__sections"},o.a.createElement("section",null,o.a.createElement("h1",null,"View"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"/"]},"Show keyboard shortcuts")),o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"Shift","F"]},"Toggle focus mode")),o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"F"]},"Focus search field")),o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"G"]},"Jump to next match in note")),o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"Shift","G"]},"Jump to previous match in note")),Y.a&&o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"+"]},"Increase font size")),Y.a&&o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"-"]},"Decrease font size")),Y.a&&o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"0"]},"Reset font size")))),o.a.createElement("section",null,o.a.createElement("h1",null,"Navigation"),o.a.createElement("ul",null,Y.a&&o.a.createElement("li",null,o.a.createElement(so,{keys:[t,","]},"Open app preferences")),Y.a&&o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"Shift","E"]},"Export all notes")),o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"Shift","T"]},"Toggle tag list")),o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"Shift","K"]},"Open note above current one")),o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"Shift","J"]},"Open note below current one")),o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"T"]},"Toggle editing content/tags")),o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"Shift","L"]},"Toggle note list (on narrow screens)")))),o.a.createElement("section",null,o.a.createElement("h1",null,"Note Editing"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"Shift","N"]},"Create new note")),o.a.createElement("li",null,o.a.createElement(so,{keys:Y.b?["fn",t,"Delete"]:[t,"Delete"]},"Trash note")),Y.a&&o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"P"]},"Print note")),o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"Shift","P"]},"Toggle Markdown preview")),o.a.createElement("li",null,o.a.createElement(so,{keys:[t,"Shift","C"]},"Insert checklist item")))))))}}])&&oo(n.prototype,r),a&&oo(n,a),c}(r.Component),fo={closeDialog:ve.closeDialog},po=Object(u.b)(null,fo)(lo),mo=n(1093);function bo(e){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function go(e,t){return(go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vo(e,t){return!t||"object"!==bo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Eo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Oo(e){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&go(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Oo(t);if(Eo()){var r=Oo(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return vo(this,e)});function c(){return yo(this,c),i.apply(this,arguments)}return n=c,(r=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.tabNames;return o.a.createElement(mo.d,{selectedTabClassName:"is-active"},o.a.createElement(mo.b,{className:"tab-panels__tab-list theme-color-border"},n.map((function(e,t){return o.a.createElement(mo.a,{className:"button button-borderless",key:t},e)}))),o.a.createElement("div",{className:"tab-panels__panel"},t.map((function(e,t){return o.a.createElement(mo.c,{key:t},o.a.createElement("div",{className:"tab-panels__column"},e))}))))}}])&&ho(n.prototype,r),a&&ho(n,a),c}(r.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wo,"propTypes",{children:i.a.node.isRequired,className:i.a.string,tabNames:i.a.arrayOf(i.a.string).isRequired});var So=wo,jo=function(){return null},No=function(e){var t=e.title,n=e.slug,r=e.activeSlug,a=e.description,i=e.onChange,c=e.learnMoreURL,u=e.renderer,s=e.children,l=o.a.createElement("a",{href:c,onClick:function(e){e.preventDefault(),Object(ut.a)(c)}},"Learn more"),f=o.a.Children.toArray(s).filter((function(e){return e}));return o.a.createElement("div",{className:"settings-group"},o.a.createElement(T.a,{headingLevel:"3"},t),o.a.createElement("div",{className:"settings-items theme-color-border"},f.map((function(e){var a=e.props,c=a.slug,s=a.title;return o.a.createElement("label",{className:"settings-item theme-color-border",htmlFor:"settings-field-".concat(n,"-").concat(c),key:c},o.a.createElement("div",{className:"settings-item-label"},s),o.a.createElement("div",{className:"settings-item-control"},u({activeSlug:r,groupTitle:t,groupSlug:n,slug:c,title:s,isEnabled:c===r,onChange:i})))}))),a&&o.a.createElement("p",null,a," ",c&&l))};No.propTypes={activeSlug:i.a.string,children:i.a.node,description:i.a.string,learnMoreURL:i.a.string,onChange:i.a.func,renderer:i.a.func,slug:i.a.string,title:i.a.string};var To=No,ko=function(e){var t=e.groupSlug,n=e.slug,r=e.isEnabled,a=e.onChange;return o.a.createElement(A,{name:t,value:n,id:"settings-field-".concat(t,"-").concat(n),checked:r,onChange:a})};ko.propTypes={groupSlug:i.a.string,slug:i.a.string,isEnabled:i.a.bool.isRequired,onChange:i.a.func.isRequired};var _o=ko,Ro=function(e){var t=e.accountName,n=e.analyticsEnabled,r=e.requestSignOut,a=e.toggleShareAnalyticsPreference;return o.a.createElement("div",{className:"settings-account"},o.a.createElement(T.a,{headingLevel:"3"},"Account"),o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("div",{className:"settings-item theme-color-border"},o.a.createElement("span",{className:"settings-account-name"},t))),o.a.createElement("ul",{className:"dialog-actions"},o.a.createElement("li",null,o.a.createElement("button",{type:"button",className:"button button-borderless",onClick:function(){Object(ut.a)("https://app.simplenote.com/settings/?from=react")}},"Edit Account ",o.a.createElement(dr,null))),o.a.createElement("li",null,o.a.createElement(To,{title:"Privacy",slug:"shareAnalytics",activeSlug:n?"enabled":"",description:"Help us improve Simplenote by sharing usage data with our analytics tool.",onChange:a,learnMoreURL:"https://automattic.com/cookies",renderer:_o},o.a.createElement(jo,{title:"Share analytics",slug:"enabled"}))),o.a.createElement("li",null,o.a.createElement("button",{type:"button",className:"button button-primary",onClick:r},"Log Out"))))};Ro.propTypes={accountName:i.a.string.isRequired,analyticsEnabled:i.a.bool.isRequired,requestSignOut:i.a.func.isRequired,toggleShareAnalyticsPreference:i.a.func.isRequired};var Po=Ro;function Co(){return(Co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ao(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Do(e){var t=e.className,n=Ao(e,["className"]);return o.a.createElement("span",{className:_()("checkbox-control",t)},o.a.createElement("input",Co({type:"checkbox"},n)),o.a.createElement("span",{className:"checkbox-control-base"},o.a.createElement("span",{className:"checkbox-control-checked"})))}Do.propTypes={className:i.a.string};var Lo=Do,Io=function(e){var t=e.groupSlug,n=e.slug,r=e.isEnabled,a=e.onChange;return o.a.createElement(Lo,{type:"radio",name:t,value:n,id:"settings-field-".concat(t,"-").concat(n),checked:r,onChange:function(){return a(n)}})};Io.propTypes={groupSlug:i.a.string,slug:i.a.string,isEnabled:i.a.bool.isRequired,onChange:i.a.func.isRequired};var xo=Io,Mo=function(e){var t=e.actions,n=e.activeTheme,a=e.autoHideMenuBar,i=e.buckets.noteBucket,c=e.lineLength,u=e.loadNotes,s=e.noteDisplay,l=e.sortIsReversed,f=e.sortTagsAlpha,p=e.sortType,d=function(e){var t=e.action,n=e.callback;return function(e){t(e),n()}};return o.a.createElement(r.Fragment,null,o.a.createElement(To,{title:"Note display",slug:"noteDisplay",activeSlug:s,onChange:t.setNoteDisplay,renderer:xo},o.a.createElement(jo,{title:"Comfy",slug:"comfy"}),o.a.createElement(jo,{title:"Condensed",slug:"condensed"}),o.a.createElement(jo,{title:"Expanded",slug:"expanded"})),o.a.createElement(To,{title:"Line length",slug:"lineLength",activeSlug:c,onChange:t.setLineLength,renderer:xo},o.a.createElement(jo,{title:"Narrow",slug:"narrow"}),o.a.createElement(jo,{title:"Full",slug:"full"})),o.a.createElement(To,{title:"Sort type",slug:"sortType",activeSlug:p,onChange:d({action:t.setSortType,callback:function(){return u(i)}}),renderer:xo},o.a.createElement(jo,{title:"Date modified",slug:"modificationDate"}),o.a.createElement(jo,{title:"Date created",slug:"creationDate"}),o.a.createElement(jo,{title:"Alphabetical",slug:"alphabetical"})),o.a.createElement(To,{title:"Sort order",slug:"sortOrder",activeSlug:l?"reversed":"",onChange:d({action:t.toggleSortOrder,callback:function(){return u(i)}}),renderer:_o},o.a.createElement(jo,{title:"Reversed",slug:"reversed"})),o.a.createElement(To,{title:"Tags",slug:"sortTagsAlpha",activeSlug:f?"alpha":"",onChange:d({action:t.toggleSortTagsAlpha,callback:e.loadTags}),renderer:_o},o.a.createElement(jo,{title:"Sort Alphabetically",slug:"alpha"})),o.a.createElement(To,{title:"Theme",slug:"theme",activeSlug:n,onChange:t.activateTheme,renderer:xo},-1===navigator.userAgent.toLowerCase().indexOf(" electron/")&&o.a.createElement(jo,{title:"System",slug:"system"}),o.a.createElement(jo,{title:"Light",slug:"light"}),o.a.createElement(jo,{title:"Dark",slug:"dark"})),Y.a&&!Y.b&&o.a.createElement(To,{title:"Menu Bar",slug:"autoHideMenuBar",activeSlug:a?"autoHide":"",description:"When set to auto-hide, press the Alt key to toggle.",onChange:t.toggleAutoHideMenuBar,renderer:_o},o.a.createElement(jo,{title:"Hide Automatically",slug:"autoHide"})))};Mo.propTypes={actions:i.a.object.isRequired,activeTheme:i.a.string.isRequired,autoHideMenuBar:i.a.bool,buckets:i.a.shape({noteBucket:i.a.object.isRequired}),lineLength:i.a.string.isRequired,loadNotes:i.a.func.isRequired,loadTags:i.a.func.isRequired,noteDisplay:i.a.string.isRequired,sortIsReversed:i.a.bool.isRequired,sortTagsAlpha:i.a.bool.isRequired,sortType:i.a.string.isRequired};var Bo=Object(u.b)((function(e){var t=e.settings;return{activeTheme:t.theme,autoHideMenuBar:t.autoHideMenuBar,lineLength:t.lineLength,noteDisplay:t.noteDisplay,sortIsReversed:t.sortReversed,sortTagsAlpha:t.sortTagsAlpha,sortType:t.sortType}}),(function(e){var t=s.a.actionCreators.loadNotes;return{actions:Object(c.b)(wt,e),loadNotes:function(n){return e(t({noteBucket:n}))},loadTags:function(){return e(Object(l.b)())}}}))(Mo),Ho=n(702),Uo=n.n(Ho),Fo=n(256);function zo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Go(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Go(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Go(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vo=/(?!\r)\n/g,qo=function(e){var t=zo(Object(j.partition)(Object(j.sortBy)(Object(j.get)(e,"data.tags",[]),(function(e){return e.toLocaleLowerCase()})),Fo.a),2),n=t[0],r=t[1];return Object.assign({id:Object(j.get)(e,"id",Object(j.uniqueId)("unknown_note_")),content:Object(j.get)(e,"data.content","").replace(Vo,"\r\n"),creationDate:new Date(1e3*e.data.creationDate).toISOString(),lastModified:new Date(1e3*e.data.modificationDate).toISOString()},e.data.systemTags.includes("pinned")&&{pinned:!0},Object(j.get)(e,"data.systemTags",[]).includes("markdown")&&{markdown:!0},r.length&&{tags:r},Object(j.get)(e,"data.systemTags",[]).includes("published")&&Object(j.get)(e,"data.publishURL","").length&&{publicURL:"http://simp.ly/p/".concat(Object(j.get)(e,"data.publishURL",""))},Object(j.get)(e,"data.systemTags",[]).includes("shared")&&n.length&&{collaboratorEmails:n})},Wo=Object(j.flowRight)(j.reverse,Object(j.partialRight)(j.sortBy,Object(j.property)("data.modificationDate")),Object(j.partialRight)(j.filter,Object(j.property)("data.content"))),Ko=function(e){var t=zo(Object(j.partition)(Wo(e),(function(e){return!!Object(j.get)(e,"data.deleted",!1)})).map((function(e){return e.map(qo)})),2),n=t[0],r=t[1];return Promise.resolve({activeNotes:r,trashedNotes:n})},Yo=function(e){return new Promise((function(t,n){var r=e.transaction("note").objectStore("note").openCursor(),o=[];r.onsuccess=function(e){var n=e.target.result;return n?o.push(n.value)&&n.continue():t(o)},r.onerror=n}))},Qo=function(){return new Promise((function(e,t){var n=window.indexedDB.open("simplenote");n.onsuccess=function(t){var n=t.target.result;return e(n)},n.onerror=t})).then(Yo).then(Ko)},$o=n(703),Zo=n.n($o);function Jo(e){return function(e){if(Array.isArray(e))return ta(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ea(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||ea(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e,t){if(e){if("string"==typeof e)return ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ta(e,t):void 0}}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aa=function(e){return ra({},e,{fileName:e.content.split("\n").map((function(e){return e.trim()})).map(Zo.a).filter(j.identity).concat("untitled").shift().slice(0,40)})},ia=function(e){if(!e.tags)return e;var t=e.tags.reduce((function(e,t){var n=Xo(e,2),r=n[0],o=n[1];return o.length+t.length>75?[[].concat(Jo(r),[o]),t]:[r,"".concat(o,", ").concat(t)]}),[[],""]).reduce((function(e,t){return[].concat(Jo(e),[t])})).map((function(e){return e.replace(/^, /,"")}));return ra({},e,{content:"".concat(e.content,"\n\nTags:\n  ").concat(t.join("\n  "))})},ca=function(e,t){var n=Xo(e,2),r=n[0],o=n[1],a=Object(j.update)(o,t.fileName,(function(e){return e||0===e?e+1:0})),i=a[t.fileName],c=i>0?"".concat(t.fileName," (").concat(i,")"):t.fileName;return[[].concat(Jo(r),[ra({},t,{fileName:c})]),a]},ua=function(e){return n.e(5).then(n.t.bind(null,1107,7)).then((function(t){var n=new(0,t.default);return n.file("source/notes.json",JSON.stringify(e,null,2).replace(Vo,"\r\n")),e.activeNotes.map(ia).map(aa).reduce(ca,[[],{}]).shift().forEach((function(e){var t=e.content,r=e.fileName,o=e.lastModified;n.file("".concat(r,".txt"),t,{date:new Date(o)})})),e.trashedNotes.map(ia).map(aa).reduce(ca,[[],{}]).shift().forEach((function(e){var t=e.content,r=e.fileName,o=e.lastModified;n.file("trash/".concat(r,".txt"),t,{date:new Date(o)})})),n})).catch(console.log)},sa=function(){return Qo().then(ua).then((function(e){return e.generateAsync({compression:"DEFLATE",platform:Object(j.get)(window,"process.platform","DOS"),type:"blob"})})).then((function(e){return Uo()(e,"notes.zip")})).catch(console.log)},la=Object(u.b)(null,(function(e){return{showDialog:function(){return e(Object(ve.showDialog)("IMPORT"))}}}))((function(e){var t=e.showDialog;return o.a.createElement("div",{className:"settings-tools"},o.a.createElement(T.a,{headingLevel:"3"},"Tools"),o.a.createElement(Mr,{items:[{name:"Import Notes",slug:"import"},{name:"Export Notes",slug:"export"}],onClickItem:function(e){"import"===e.slug?t():"export"===e.slug&&sa()}}))}));function fa(e){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ma(e,t){return(ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ba(e,t){return!t||"object"!==fa(t)&&"function"!=typeof t?ya(e):t}function ya(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ha(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ga(e){return(ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ea=["account","display","tools"],Oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ma(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=ga(t);if(ha()){var r=ga(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ba(this,e)});function c(){var e;pa(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return va(ya(e=i.call.apply(i,[this].concat(n))),"onToggleShareAnalyticsPreference",(function(){e.props.toggleShareAnalyticsPreference({preferencesBucket:e.props.buckets.preferencesBucket})})),va(ya(e),"onSignOutRequested",(function(){var t=e.props.buckets.noteBucket,n=e.props.appState.notes;t.hasLocalChanges((function(r,o){if(o)e.showUnsyncedWarning();else{if(!n)return e.props.logout();Promise.all(n.map((function(e){return new Promise((function(n,r){return t.getVersion(e.id,(function(e,t){return e||0===t?r():n()}))}))}))).then((function(){return e.props.logout()}),(function(){return e.showUnsyncedWarning()}))}}))})),va(ya(e),"showUnsyncedWarning",(function(){Y.a?e.showElectronWarningDialog():e.showWebWarningDialog()})),va(ya(e),"showElectronWarningDialog",(function(){require("electron").remote.dialog.showMessageBox({type:"warning",buttons:["Delete Notes","Cancel","Visit Web App"],title:"Unsynced Notes Detected",message:"Logging out will delete any unsynced notes. You can verify your synced notes by logging in to the Web App."}).then((function(t){var n=t.response;0===n?e.props.logout():2===n&&Object(ut.a)("https://app.simplenote.com")}))})),va(ya(e),"showWebWarningDialog",(function(){confirm("Warning: Unsynced notes were detected.\n\nLogging out will delete any notes that have not synced. Check your connection and visit app.simplenote.com to verify synced notes.\n\nClick OK to delete unsynced notes and Log Out.")&&e.props.logout()})),e}return n=c,(r=[{key:"render",value:function(){var e=this.props,t=e.buckets,n=e.closeDialog,r=e.settings,a=this.props.appState.preferences.analyticsEnabled;return o.a.createElement(Nr,{className:"settings",title:"Settings",onDone:n},o.a.createElement(So,{tabNames:Ea},o.a.createElement(Po,{accountName:r.accountName,analyticsEnabled:a,requestSignOut:this.onSignOutRequested,toggleShareAnalyticsPreference:this.onToggleShareAnalyticsPreference}),o.a.createElement(Bo,{buckets:t}),o.a.createElement(la,null)))}}])&&da(n.prototype,r),a&&da(n,a),c}(r.Component),wa=s.a.actionCreators.toggleShareAnalyticsPreference,Sa=Object(u.b)(null,(function(e){return{closeDialog:function(){return e(Object(ve.closeDialog)())},logout:function(){return e(Object(ve.logout)())},toggleShareAnalyticsPreference:function(t){e(wa(t))}}}))(Oa),ja=n(707),Na=n.n(ja),Ta=n(718),ka=n.n(Ta);function _a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ra(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pa(e){var t=e.text,n=Object(r.useRef)(),a=Object(r.useRef)(),i=Object(r.useRef)(),c=function(){l(!0)},u=_a(Object(r.useState)(!1),2),s=u[0],l=u[1];return Object(r.useEffect)((function(){if(s){var e=setTimeout((function(){return l(!1)}),4e3);return function(){return clearTimeout(e)}}}),[s]),Object(r.useEffect)((function(){a.current=function(){return t},i.current=c}),[t,c]),Object(r.useEffect)((function(){var e=new ka.a(n.current,{text:function(){return a.current()}});return e.on("success",(function(){return i.current()})),function(){return e.destroy()}}),[]),o.a.createElement("button",{ref:n,type:"button",className:"button button-borderless"},s?"Copied!":"Copy")}Pa.propTypes={disbaled:i.a.bool,text:i.a.string};var Ca=Pa;function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Da(e){return function(e){if(Array.isArray(e))return La(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return La(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return La(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function La(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ia(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ma(e,t){return(Ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ba(e,t){return!t||"object"!==Aa(t)&&"function"!=typeof t?Ha(e):t}function Ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ua(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Fa(e){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function za(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ga=["collaborate","publish"],Va=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ma(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Fa(t);if(Ua()){var r=Fa(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ba(this,e)});function c(){var e;Ia(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return za(Ha(e=i.call.apply(i,[this].concat(n))),"onTogglePublished",(function(t){e.props.publishNote(e.props.note,t.currentTarget.checked)})),za(Ha(e),"getPublishURL",(function(e){return Object(j.isEmpty)(e)?void 0:"http://simp.ly/p/".concat(e)})),za(Ha(e),"onAddCollaborator",(function(t){var n=e.props.note,r=n.data&&n.data.tags||[],o=e.collaboratorElement.value.trim();t.preventDefault(),e.collaboratorElement.value="";var a=e.props.settings.accountName===o;""===o||-1!==r.indexOf(o)||a||(e.props.updateNoteTags({note:n,tags:[].concat(Da(r),[o])}),K.a.tracks.recordEvent("editor_note_collaborator_added"))})),za(Ha(e),"onRemoveCollaborator",(function(t){var n=e.props.note,r=n.data&&n.data.tags||[];r=r.filter((function(e){return e!==t})),e.props.updateNoteTags({note:n,tags:r}),K.a.tracks.recordEvent("editor_note_collaborator_removed")})),za(Ha(e),"collaborators",(function(){var t=e.props.note,n=(t.data&&t.data.tags||[]).filter(Fo.a);return n.reverse(),n})),za(Ha(e),"gravatarURL",(function(e){var t=(new Na.a).update(e.trim().toLowerCase()).digest("hex").toLowerCase();return"https://secure.gravatar.com/avatar/".concat(t,".jpg?s=68")})),e}return n=c,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.closeDialog,r=t.note,a=r&&r.data||{},i=Object(j.includes)(a.systemTags,"published"),c=this.getPublishURL(a.publishURL);return o.a.createElement(Nr,{className:"settings",title:"Share",onDone:n},o.a.createElement(So,{tabNames:Ga},o.a.createElement("div",null,o.a.createElement("div",{className:"settings-group"},o.a.createElement("p",null,"Add an email address of another Simplenote user to share a note. You'll both be able to edit and view the note."),o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("form",{className:"settings-item theme-color-border",onSubmit:this.onAddCollaborator},o.a.createElement("input",{className:"settings-item-text-input transparent-input",pattern:"^[^@]+@.+",placeholder:"email@example.com",ref:function(t){return e.collaboratorElement=t},spellCheck:!1,title:"Please enter a valid email"}),o.a.createElement("div",{className:"settings-item-control"},o.a.createElement("button",{type:"submit",className:"button button-borderless"},"Add Email"))))),o.a.createElement("div",{className:"settings-group"},o.a.createElement("div",{className:"share-collaborators-heading theme-color-border"},o.a.createElement(T.a,{headingLevel:"3"},"Collaborators")),o.a.createElement("ul",{className:"share-collaborators"},this.collaborators().map((function(t){return o.a.createElement("li",{key:t,className:"share-collaborator"},o.a.createElement("span",{className:"share-collaborator-photo"},o.a.createElement("img",{src:e.gravatarURL(t),width:"34",height:"34"})),o.a.createElement("span",{className:"share-collaborator-name"},t),o.a.createElement("button",{className:"share-collaborator-remove button button-borderless button-danger",onClick:e.onRemoveCollaborator.bind(e,t)},"Remove"))}))))),o.a.createElement("div",null,o.a.createElement("div",{className:"settings-group"},o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("label",{htmlFor:"settings-field-public",className:"settings-item theme-color-border"},o.a.createElement("div",{className:"settings-item-label"},"Make public link"),o.a.createElement("div",{className:"settings-item-control"},o.a.createElement(A,{id:"settings-field-public",onChange:this.onTogglePublished,checked:i})))),o.a.createElement("p",null,"Ready to share your note with the world? Anyone with the public link will be able to view the latest version.")),i&&o.a.createElement("div",{className:"settings-group"},o.a.createElement(T.a,{headingLevel:"3"},"Public link"),o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("div",{className:"settings-item theme-color-border"},o.a.createElement("input",{ref:function(t){return e.publishUrlElement=t},className:"settings-item-text-input transparent-input",placeholder:i?"Publishing note…":"Note not published",value:c,spellCheck:!1}),o.a.createElement("div",{className:"settings-item-control"},c&&o.a.createElement(Ca,{text:c})))),c&&o.a.createElement("p",null,"Note published!")))))}}])&&xa(n.prototype,r),a&&xa(n,a),c}(r.Component),qa=Object(u.b)((function(e){return{settings:e.settings,note:e.ui.note}}),(function(e){return{closeDialog:function(){return e(Object(ve.closeDialog)())},publishNote:function(t,n){return e(Object(ve.publishNote)(t,n))},updateNoteTags:function(t){var n=t.note,r=t.tags;return e(Object(fn.b)({note:n,tags:r}))}}}))(Va);function Wa(e){return(Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ka(){return(Ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $a(e,t){return($a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Za(e,t){return!t||"object"!==Wa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ja(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Xa(e){return(Xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ei=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$a(e,t)}(u,e);var t,n,a,i,c=(t=u,function(){var e,n=Xa(t);if(Ja()){var r=Xa(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Za(this,e)});function u(){return Ya(this,u),c.apply(this,arguments)}return n=u,(a=[{key:"render",value:function(){var e=this.props,t=e.appProps,n=e.buckets,a=e.themeClass,i=e.closeDialog;return o.a.createElement(r.Fragment,null,this.props.dialogs.map((function(e){return o.a.createElement(fr.a,{key:e,className:"dialog-renderer__content",contentLabel:e,isOpen:!0,onRequestClose:i,overlayClassName:"dialog-renderer__overlay",portalClassName:_()("dialog-renderer__portal",a)},"ABOUT"===e?o.a.createElement(Ir,{key:"about"}):"IMPORT"===e?o.a.createElement(to,{key:"import",buckets:n}):"KEYBINDINGS"===e?o.a.createElement(po,{key:"keybindings"}):"SETTINGS"===e?o.a.createElement(Sa,Ka({key:"settings",buckets:n},t)):"SHARE"===e?o.a.createElement(qa,{key:"share"}):null)})))}}])&&Qa(n.prototype,a),i&&Qa(n,i),u}(r.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ei,"displayName","DialogRenderer");var ti={closeDialog:ve.closeDialog},ni=Object(u.b)((function(e){return{dialogs:e.ui.dialogs}}),ti)(ei),ri=n(300),oi=n(50),ai=n.n(oi),ii=ai()("sync:activityHooks"),ci=Object(j.debounce)((function(e,t){ii("Sync active..."),Object(j.isFunction)(t)&&t()}),500,{leading:!0,trailing:!1}),ui=Object(j.debounce)((function(e,t){ii("Sync idle"),Object(j.isFunction)(t)&&t()}),500),si=function(e,t){var n=t.onActive,r=void 0===n?j.noop:n,o=t.onIdle,a=void 0===o?j.noop:o;Object(j.startsWith)(e,"h:")||(ci(e,r),ui(e,a))},li=n(391);function fi(e){return function(e){if(Array.isArray(e))return pi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var di=function(e){var t=Object(li.b)(e),n=t.queues,r=t.sent,o=Object(j.uniq)([].concat(fi(Object.keys(n)),fi(Object.keys(r))));return ai()("sync:getUnsyncedNoteIds")(o),o},mi=ai()("sync:nudgeUnsynced");var bi,yi,hi=function(e){var t=e.noteBucket,n=e.notes;return e.client.isAuthorized()?t.hasLocalChanges().then((function(e){return e?Promise.resolve():function(e){var t=e.noteBucket,n=e.notes;if(!n)return;return Promise.all(n.map((function(e){return new Promise((function(n){return t.getVersion(e.id,(function(t,r){var o={id:e.id,data:e.data,unsynced:t||0===r};n(o)}))}))}))).then((function(e){var n=e.filter((function(e){return e.unsynced}));mi("".concat(n.length," unsynced notes")),n.forEach((function(e){return t.update(e.id,e.data)}))}))}({noteBucket:t,notes:n})})):Promise.resolve()};function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vi(e){return function(e){if(Array.isArray(e))return Ei(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ei(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ei(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oi(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function wi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ji(e,t){return(ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ni(e,t){return!t||"object"!==gi(t)&&"function"!=typeof t?Ti(e):t}function Ti(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ki(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _i(e){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(n),!0).forEach((function(t){Ci(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ai=Object(ri.a)(),Di=w(Object(u.b)((function(e){return e}),(function(e,t){var n,r,o=t.noteBucket,a=Object.assign({},s.a.actionCreators),i=function(t){return function(n){e(t(n)),e(a.loadNotes({noteBucket:o}))}};return Pi({actions:Object(c.b)(a,e)},Object(c.b)(Object(j.pick)(wt,["activateTheme","decreaseFontSize","increaseFontSize","resetFontSize","setLineLength","setNoteDisplay","setAccountName","toggleAutoHideMenuBar","toggleFocusMode","toggleSpellCheck"]),e),(Ci(n={closeNote:function(){return e(Object(ve.closeNote)())},remoteNoteUpdate:function(t,n){return e(L.a.simperium.remoteNoteUpdate(t,n))},loadTags:function(){return e(Object(l.b)())},setSortType:i(wt.setSortType),toggleSortOrder:i(wt.toggleSortOrder),toggleSortTagsAlpha:(r=wt.toggleSortTagsAlpha,function(t){e(r(t)),e(Object(l.b)())}),createNote:function(){return e(Object(ve.createNote)())},openTagList:function(){return e(Object(ve.toggleNavigation)())},selectNote:function(t){return e(L.a.ui.selectNote(t))},focusSearchField:function(){return e(L.a.ui.focusSearchField())},setSimperiumConnectionStatus:function(t){return e(Object(ve.toggleSimperiumConnectionStatus)(t))}},"selectNote",(function(t){return e(L.a.ui.selectNote(t))})),Ci(n,"setUnsyncedNoteIds",(function(t){return e(Object(ve.setUnsyncedNoteIds)(t))})),Ci(n,"showDialog",(function(t){return e(L.a.ui.showDialog(t))})),Ci(n,"trashNote",(function(t){return e(L.a.ui.trashNote(t))})),n))}))((yi=bi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ji(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=_i(t);if(ki()){var r=_i(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ni(this,e)});function c(){var e;wi(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ci(Ti(e=i.call.apply(i,[this].concat(n))),"handleShortcut",(function(t){var n=t.code,r=t.ctrlKey,o=t.metaKey,a=t.shiftKey,i=(r||o)&&r!==o;return i&&a&&"KeyT"===n&&!e.props.showNavigation?(e.props.openTagList(),t.stopPropagation(),t.preventDefault(),!1):i&&!a&&"KeyF"===n?(e.props.focusSearchField(),t.stopPropagation(),t.preventDefault(),!1):i&&a&&"KeyF"===n?(e.props.toggleFocusMode(),t.stopPropagation(),t.preventDefault(),!1):i&&a&&"KeyN"===n?(e.props.actions.newNote({noteBucket:e.props.noteBucket}),K.a.tracks.recordEvent("list_note_created"),t.stopPropagation(),t.preventDefault(),!1):e.props.ui.note&&i&&"Delete"===n?(e.props.actions.trashNote({noteBucket:e.props.noteBucket,note:e.props.ui.note,previousIndex:e.props.appState.notes.findIndex((function(t){var n=t.id;return e.props.ui.note.id===n}))}),t.stopPropagation(),t.preventDefault(),!1):(i&&"KeyG"===n&&(t.stopPropagation(),t.preventDefault()),!0)})),Ci(Ti(e),"onAppCommand",(function(t,n){if("exportZipArchive"===Object(j.get)(n,"action")&&sa(),"printNote"===n.action)return window.print();if("focusSearchField"===n.action)return e.props.focusSearchField();if("showDialog"===n.action)return e.props.showDialog(n.dialog);if("trashNote"===n.action&&e.props.ui.note)return e.props.actions.trashNote({noteBucket:e.props.noteBucket,note:e.props.ui.note,previousIndex:e.props.appState.notes.findIndex((function(t){var n=t.id;return e.props.ui.note.id===n}))});if(Object(j.overEvery)(j.isObject,(function(e){return null!==e.action}),(function(t){return Object(j.has)(e.props.actions,t.action)||Object(j.has)(e.props,t.action)}))(n))if("newNote"===n.action)e.props.actions.newNote({noteBucket:e.props.noteBucket}),K.a.tracks.recordEvent("list_note_created");else if(Object(j.has)(e.props,n.action)){var r,o=n.action,a=Oi(n,["action"]);(r=e.props)[o].apply(r,vi(Object(j.values)(a)))}else e.props.actions[n.action](n)})),Ci(Ti(e),"onAuthChanged",(function(){var t=e.props.appState.accountName;K.a.initialize(t),e.onLoadPreferences(),e.onNotesIndex(),e.props.loadTags()})),Ci(Ti(e),"onNotesIndex",(function(){var t=e.props,n=t.noteBucket,r=t.setUnsyncedNoteIds;(0,e.props.actions.loadNotes)({noteBucket:n}),r(di(n))})),Ci(Ti(e),"onNoteRemoved",(function(){return e.onNotesIndex()})),Ci(Ti(e),"onNoteUpdate",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.props,a=o.noteBucket,i=o.selectNote,c=o.ui.note;e.props.remoteNoteUpdate(t,n),c&&t===c.id&&a.get(t,(function(e,t){if(!e){var n=r.patch?Pi({},t,{hasRemoteUpdate:!0}):t;i(n)}}))})),Ci(Ti(e),"onLoadPreferences",(function(t){return e.props.actions.loadPreferences({callback:t,preferencesBucket:e.props.preferencesBucket})})),Ci(Ti(e),"getTheme",(function(){var t=e.props,n=t.settings.theme,r=t.systemTheme;return"system"===n?r:n})),Ci(Ti(e),"initializeElectron",(function(){var t=require("electron").remote;e.setState({electron:{currentWindow:t.getCurrentWindow(),Menu:t.Menu}})})),Ci(Ti(e),"onUpdateContent",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){var o=Pi({},t,{data:Pi({},t.data,{content:n,modificationDate:Math.floor(Date.now()/1e3)})});e.props.selectNote(o);var a=e.props.noteBucket;a.update(t.id,o.data,{},{sync:r}),r&&e.syncNote(t.id)}})),Ci(Ti(e),"syncNote",(function(t){e.props.noteBucket.touch(t)})),Ci(Ti(e),"syncActivityHooks",(function(t){si(t,{onIdle:function(){var t=e.props,n=t.appState.notes,r=t.client,o=t.noteBucket,a=t.setUnsyncedNoteIds;hi({client:r,noteBucket:o,notes:n}),a(di(o))}})})),Ci(Ti(e),"toggleShortcuts",(function(t){t?window.addEventListener("keydown",e.handleShortcut,!0):window.removeEventListener("keydown",e.handleShortcut,!0)})),Ci(Ti(e),"loadPreferences",(function(){e.props.actions.loadPreferences({preferencesBucket:e.props.preferencesBucket})})),e}return n=c,(r=[{key:"UNSAFE_componentWillMount",value:function(){Y.a&&this.initializeElectron(),this.onAuthChanged()}},{key:"componentDidMount",value:function(){var e=this;Ai.on("appCommand",this.onAppCommand),Ai.send("setAutoHideMenuBar",this.props.settings.autoHideMenuBar),Ai.send("settingsUpdate",this.props.settings),this.props.noteBucket.on("index",this.onNotesIndex).on("update",this.onNoteUpdate).on("update",Object(j.debounce)(this.onNotesIndex,200,{maxWait:1e3})).on("remove",this.onNoteRemoved).beforeNetworkChange((function(t){return e.props.actions.onNoteBeforeRemoteUpdate({noteId:t})})),this.props.preferencesBucket.on("update",this.onLoadPreferences),this.props.tagBucket.on("index",this.props.loadTags).on("update",Object(j.debounce)(this.props.loadTags,200)).on("remove",this.props.loadTags),this.props.client.on("authorized",this.onAuthChanged).on("unauthorized",this.onAuthChanged).on("message",Be).on("message",this.syncActivityHooks).on("send",this.syncActivityHooks).on("connect",(function(){return e.props.setSimperiumConnectionStatus(!0)})).on("disconnect",(function(){return e.props.setSimperiumConnectionStatus(!1)})),this.onLoadPreferences((function(){return K.a.tracks.recordEvent("application_opened")})),this.toggleShortcuts(!0)}},{key:"componentWillUnmount",value:function(){this.toggleShortcuts(!1),Ai.removeListener("appCommand",this.onAppCommand)}},{key:"componentDidUpdate",value:function(e){var t=this.props.settings;t!==e.settings&&Ai.send("settingsUpdate",t)}},{key:"render",value:function(){var e=this.props,t=(e.appState,e.isDevConfig),n=e.noteBucket,r=e.preferencesBucket,a=e.settings,i=e.tagBucket,c=e.isSmallScreen,u=e.ui,s=u.showNavigation,l=u.showNoteInfo,f="theme-".concat(this.getTheme()),p=_()("app",f,{"is-line-length-full":"full"===a.lineLength,"touch-enabled":"ontouchstart"in document.body}),d=_()("simplenote-app",{"note-info-open":l,"navigation-open":s,"is-electron":Y.a,"is-macos":Y.b});return o.a.createElement("div",{className:p},t&&o.a.createElement(sr,null),o.a.createElement("div",{className:d},s&&o.a.createElement(Ot,null),o.a.createElement(ur,{isFocusMode:a.focusModeEnabled,isNavigationOpen:s,isNoteInfoOpen:l,isSmallScreen:c,noteBucket:n,onUpdateContent:this.onUpdateContent,syncNote:this.syncNote}),l&&o.a.createElement(W,{noteBucket:n})),o.a.createElement(ni,{appProps:this.props,buckets:{noteBucket:n,preferencesBucket:r,tagBucket:i},themeClass:f}))}}])&&Si(n.prototype,r),a&&Si(n,a),c}(r.Component),Ci(bi,"displayName","App"),Ci(bi,"propTypes",{actions:i.a.object.isRequired,appState:i.a.object.isRequired,client:i.a.object.isRequired,isDevConfig:i.a.bool.isRequired,isSmallScreen:i.a.bool.isRequired,loadTags:i.a.func.isRequired,openTagList:i.a.func.isRequired,settings:i.a.object.isRequired,preferencesBucket:i.a.object.isRequired,systemTheme:i.a.string.isRequired,tagBucket:i.a.object.isRequired}),yi))),Li=n(389),Ii=n(5),xi=n.n(Ii),Mi=n(719),Bi=n(720),Hi=n.n(Bi);function Ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(n),!0).forEach((function(t){zi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Wi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vi(e){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qi(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Wi(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function Wi(e,t){if(e){if("string"==typeof e)return Ki(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ki(e,t):void 0}}function Ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yi,Qi=new Map,$i="",Zi=[],Ji=new Set,Xi=null,ec=!1,tc=function(e){for(var t,n=/(?:\btag:)([^\s,]+)/g,r=new Set;null!==(t=n.exec(e));)r.add(t[1].toLocaleLowerCase());return r},nc=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"quickSearch",n=performance.now(),r=new Set,o=qi(Qi.values());try{var a=function(){var o=Gi(e.value,2),a=o[0],i=o[1],c=performance.now();if("quickSearch"===t&&c-n>10)return oc(0,"fullSearch"),{v:r};if(ec!==i.deleted)return"continue";var u,s=!0,l=qi(Ji.values());try{for(l.s();!(u=l.n()).done;){var f=u.value;if(!i.tags.has(f)){s=!1;break}}}catch(e){l.e(e)}finally{l.f()}return s?Xi&&!i.tags.has(Xi)||Zi.length>0&&!Zi.every((function(e){return i.content.includes(e)}))?"continue":void r.add(a):"continue"};for(o.s();!(e=o.n()).done;){var i=a();switch(i){case"continue":continue;default:if("object"===Vi(i))return i.v}}}catch(e){o.e(e)}finally{o.f()}return r},rc=null,oc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"quickSearch";rc&&clearTimeout(rc),rc=setTimeout((function(){rc=null,Yi.postMessage({action:"filterNotes",noteIds:nc(t)})}),e)},ac=function(e,t){var n=new Set(t.tags.map((function(e){return e.toLocaleLowerCase()})));Qi.set(e,[e,Fi({},t,{content:t.content.toLocaleLowerCase(),deleted:!!t.deleted,tags:n})])},ic=n(407);function cc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cc(Object(n),!0).forEach((function(t){sc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lc=[],fc=function(e){var t=new MessageChannel,n=t.port1,r=t.port2,o=function(t){var n,r=e.getState(),o=r.appState,a=r.tags,i=r.ui.searchQuery,c=Object(ic.b)(a,i);e.dispatch(L.a.ui.filterNotes((null===(n=o.notes)||void 0===n?void 0:n.filter((function(e){var n=e.id;return t.has(n)})))||lc,c.length>0?c:lc))};n.onmessage=function(e){switch(e.data.action){case"filterNotes":o(e.data.noteIds)}},(Yi=r).onmessage=function(e){if("updateNote"===e.data.action){var t=e.data,n=t.noteId,r=t.data;ac(n,r),oc(1e3)}else"filterNotes"===e.data.action&&("string"==typeof e.data.searchQuery&&($i=e.data.searchQuery.trim().toLocaleLowerCase(),Zi=Object(Un.b)($i),Ji=tc($i)),"string"==typeof e.data.openedTag?Xi=e.data.openedTag.toLocaleLowerCase():null===e.data.openedTag&&(Ji=tc($i),Xi=null),"boolean"==typeof e.data.showTrash&&(ec=e.data.showTrash),oc())};var a=!1;return function(t){return function(r){var i=e.getState(),c=t(r);switch(r.type){case"App.notesLoaded":a||(r.notes.forEach((function(e){return n.postMessage({action:"updateNote",noteId:e.id,data:e.data})})),a=!0),n.postMessage({action:"filterNotes"});break;case"REMOTE_NOTE_UPDATE":ac(r.noteId,r.data),n.postMessage({action:"filterNotes"});break;case"CREATE_NOTE":n.postMessage({action:"filterNotes",searchQuery:""});break;case"OPEN_TAG":n.postMessage({action:"filterNotes",openedTag:r.tag.data.name,showTrash:!1});break;case"SELECT_TRASH":n.postMessage({action:"filterNotes",openedTag:null,showTrash:!0});break;case"SHOW_ALL_NOTES":n.postMessage({action:"filterNotes",openedTag:null,showTrash:!1});break;case"SEARCH":n.postMessage({action:"filterNotes",searchQuery:r.searchQuery});break;case"DELETE_NOTE_FOREVER":case"RESTORE_NOTE":ac(i.ui.note.id,uc({},i.ui.note.data,{deleted:!1})),o(nc("fullSearch"));break;case"TRASH_NOTE":case"App.trashNote":ac(i.ui.note.id,uc({},i.ui.note.data,{deleted:!0})),o(nc("fullSearch"));break;case"App.authChanged":o(nc("fullSearch"))}return c}}};function pc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pc(Object(n),!0).forEach((function(t){mc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bc={accountName:null,autoHideMenuBar:!1,focusModeEnabled:!1,fontSize:16,lineLength:"narrow",markdownEnabled:!1,noteDisplay:"comfy",sortReversed:!1,sortTagsAlpha:!1,sortType:"modificationDate",spellCheckEnabled:!0,theme:"system",wpToken:!1},yc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setAccountName":return dc({},e,{accountName:t.accountName});case"setAutoHideMenuBar":return dc({},e,{autoHideMenuBar:t.autoHideMenuBar});case"setFocusMode":return dc({},e,{focusModeEnabled:t.focusModeEnabled});case"setFontSize":return dc({},e,{fontSize:Object(j.clamp)(t.fontSize||bc.fontSize,10,30)});case"setLineLength":return dc({},e,{lineLength:t.lineLength});case"SET_SYSTEM_TAG":return"markdown"===t.tagName?dc({},e,{markdownEnabled:t.shouldHaveTag}):e;case"setNoteDisplay":return dc({},e,{noteDisplay:t.noteDisplay});case"setSortReversed":return dc({},e,{sortReversed:t.sortReversed});case"setSortTagsAlpha":return dc({},e,{sortTagsAlpha:t.sortTagsAlpha});case"setSortType":return dc({},e,{sortType:t.sortType});case"setSpellCheck":return dc({},e,{spellCheckEnabled:t.spellCheckEnabled});case"setTheme":return dc({},e,{theme:t.theme});default:return e}},hc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TAGS_LOADED":var n=t.tags.slice();return t.sortTagsAlpha?n.sort((function(e,t){var n,r;return null==e||null===(n=e.data)||void 0===n?void 0:n.name.toLocaleLowerCase().localeCompare(null===(r=t.data)||void 0===r?void 0:r.name.toLocaleLowerCase())})):n.sort((function(e,t){return(0|e.data.index)-(0|t.data.index)})),n;default:return e}};function gc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gc(Object(n),!0).forEach((function(t){Ec(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ec(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oc(e){return function(e){if(Array.isArray(e))return wc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return wc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sc=[],jc=Object(c.c)({dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLOSE_DIALOG":return e.slice(0,-1);case"SHOW_DIALOG":return e.includes(t.dialog)?e:[].concat(Oc(e),[t.dialog]);case"App.authChanged":return[];default:return e}},editMode:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_EDIT_MODE":return!e;case"CREATE_NOTE":return!0;default:return e}},editingTags:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TAG_EDITING_TOGGLE":return!e;case"OPEN_NOTE":case"SELECT_NOTE":case"OPEN_TAG":case"SELECT_TRASH":case"SHOW_ALL_NOTES":case"NAVIGATION_TOGGLE":return!1;default:return e}},filteredNotes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sc,t=arguments.length>1?arguments[1]:void 0;return"FILTER_NOTES"===t.type?t.notes:e},listTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"All Notes",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ALL_NOTES":return"All Notes";case"SELECT_TRASH":return"Trash";case"OPEN_TAG":return t.tag.data.name;default:return e}},note:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"App.emptyTrash":case"SELECT_TRASH":case"SHOW_ALL_NOTES":case"CLOSE_NOTE":case"DELETE_NOTE_FOREVER":case"RESTORE_NOTE":case"TRASH_NOTE":case"OPEN_TAG":return null;case"OPEN_NOTE":case"SELECT_NOTE":return t.options?vc({},t.note,{hasRemoteUpdate:t.options.hasRemoteUpdate}):t.note;case"SET_SYSTEM_TAG":return Object(fn.a)(t.note,t.tagName,t.shouldHaveTag);default:return e}},noteRevisions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_REVISIONS":return t.revisions;case"CREATE_NOTE":case"OPEN_NOTE":case"SELECT_NOTE":return Sc;default:return e}},openedTag:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TRASH":case"SHOW_ALL_NOTES":return null;case"OPEN_TAG":return t.tag;default:return e}},searchQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NOTE":return"";case"SEARCH":return t.searchQuery;default:return e}},selectedRevision:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_REVISION":return t.revision;case"CREATE_NOTE":case"OPEN_NOTE":case"REVISIONS_TOGGLE":case"SELECT_NOTE":return null;default:return e}},showNavigation:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAVIGATION_TOGGLE":return!e;case"OPEN_TAG":case"SELECT_TRASH":case"SHOW_ALL_NOTES":return!1;case"SHOW_DIALOG":return"SETTINGS"!==t.dialog&&e;default:return e}},showNoteInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTE_INFO_TOGGLE":return!e;case"NAVIGATION_TOGGLE":return!1;default:return e}},showNoteList:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTE_LIST_TOGGLE":return!e;case"OPEN_NOTE":return!1;default:return e}},showRevisions:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REVISIONS_TOGGLE":return!e;case"OPEN_NOTE":case"SELECT_NOTE":case"CREATE_NOTE":return!1;default:return e}},showTrash:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TRASH":return!0;case"CREATE_NOTE":case"OPEN_TAG":case"SHOW_ALL_NOTES":return!1;default:return e}},simperiumConnected:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SIMPERIUM_CONNECTION_STATUS_TOGGLE"===t.type?t.simperiumConnected:e},tagSuggestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sc,t=arguments.length>1?arguments[1]:void 0;return"FILTER_NOTES"===t.type?t.tags:e},unsyncedNoteIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sc,t=arguments.length>1?arguments[1]:void 0;return"SET_UNSYNCED_NOTE_IDS"===t.type?t.noteIds:e}});function Nc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tc=Object(c.c)({appState:s.a.reducer.bind(s.a),settings:yc,tags:hc,ui:jc}),kc=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d;function _c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pc=ai()("simperium-middleware"),Cc=function(e,t,r,o,a){return function(t){a.on("message",(function(n){if(n.startsWith("0:auth:")){var o=_c(n.split("0:auth:"),2),a=(o[0],o[1]);return Pc("authenticated: ".concat(a)),null===r?t.dispatch(L.a.settings.setAccountName(a)):r!==a?(Pc("was logged in as ".concat(r," - logging out")),e()):void 0}})),a.on("unauthorized",(function(){e()}));var i=a.bucket("note");o&&n.e(10).then(n.bind(null,1108)).then((function(e){var t=e.content,n=Date.now()/1e3;i.add({content:t,deleted:!1,systemTags:[],creationDate:n,modificationDate:n,shareURL:"",publishURL:"",tags:[]})}));return function(n){return function(r){var o=n(r),c=t.getState();switch(r.type){case"LOGOUT":return a.reset().then((function(){return e()})),o;case"SET_SYSTEM_TAG":i.update(r.note.id,Object(fn.a)(r.note,r.tagName,r.shouldHaveTag).data);break;case"REVISIONS_TOGGLE":!function(e,t){if(t.ui.showRevisions&&t.ui.note){var n=t.ui.note;i.getRevisions(n.id,(function(t,r){if(t)return Pc("Failed to load revisions for note ".concat(n.id,": ").concat(t));var o=e.getState();o.ui.note&&n.id===o.ui.note.id&&e.dispatch(L.a.ui.storeRevisions(n.id,r))}))}}(t,c)}return o}}}},Ac=n(6),Dc=(n(31),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Boolean(e),n=t?"Development":"Production",r=e,o=r?"warn":"info";return console[o]("Simperium config: ".concat(n)),t});function Lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ic(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xc=xi()(),Mc=xc.app_id,Bc=function(e,t,n,r){var a=Object(Li.b)({appID:Mc,token:t,bucketConfig:{note:{beforeIndex:function(e){var t=e.data&&e.data.content||"";return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lc(Object(n),!0).forEach((function(t){Ic(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{contentKey:Object(Ue.b)(t)})},configure:function(e){e.createIndex("modificationDate","data.modificationDate"),e.createIndex("creationDate","data.creationDate"),e.createIndex("alphabetical","contentKey")}},preferences:function(e){console.log("Configure preferences",e)},tag:function(e){console.log("Configure tag",e)}},database:"simplenote",version:42}),i=ai()("client"),s=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.apply(void 0,[e].concat(n))}};a.on("connect",s("Connected")).on("disconnect",s("Not connected")).on("message",s("<=")).on("send",s("=>")).on("unauthorized",s("Not authorized")),fr.a.setAppElement("#root");var l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(c.e)(Tc,kc(Hi()("settings",{key:"simpleNote",slicer:function(e){return function(t){return Nc({},e,Object(j.omit)(t[e],["accountName","focusModeEnabled"]))}}}),c.a.apply(void 0,[Mi.a,fc,kn].concat(t))))}(Cc(e,0,n,r,a));l.dispatch(L.a.settings.setAccountName(n)),Object(Ac.render)(o.a.createElement(u.a,{store:l},o.a.createElement(Di,{client:a,noteBucket:a.bucket("note"),preferencesBucket:a.bucket("preferences"),tagBucket:a.bucket("tag"),isDevConfig:Dc(null==xc?void 0:xc.development)})),document.getElementById("root"))}},128:function(e,t,n){"use strict";n.r(t),n.d(t,"closeDialog",(function(){return r})),n.d(t,"closeNote",(function(){return o})),n.d(t,"createNote",(function(){return a})),n.d(t,"deleteNoteForever",(function(){return i})),n.d(t,"filterNotes",(function(){return c})),n.d(t,"focusSearchField",(function(){return u})),n.d(t,"logout",(function(){return s})),n.d(t,"markdownNote",(function(){return l})),n.d(t,"pinNote",(function(){return f})),n.d(t,"publishNote",(function(){return p})),n.d(t,"openNote",(function(){return d})),n.d(t,"openTag",(function(){return m})),n.d(t,"restoreNote",(function(){return b})),n.d(t,"selectRevision",(function(){return y})),n.d(t,"selectTrash",(function(){return h})),n.d(t,"setUnsyncedNoteIds",(function(){return g})),n.d(t,"showAllNotes",(function(){return v})),n.d(t,"showDialog",(function(){return E})),n.d(t,"storeRevisions",(function(){return O})),n.d(t,"toggleRevisions",(function(){return w})),n.d(t,"toggleSimperiumConnectionStatus",(function(){return S})),n.d(t,"search",(function(){return j})),n.d(t,"selectNote",(function(){return N})),n.d(t,"toggleEditMode",(function(){return T})),n.d(t,"toggleNavigation",(function(){return k})),n.d(t,"toggleNoteList",(function(){return _})),n.d(t,"toggleNoteInfo",(function(){return R})),n.d(t,"toggleTagDrawer",(function(){return P})),n.d(t,"toggleTagEditing",(function(){return C})),n.d(t,"trashNote",(function(){return A}));var r=function(){return{type:"CLOSE_DIALOG"}},o=function(){return{type:"CLOSE_NOTE"}},a=function(){return{type:"CREATE_NOTE"}},i=function(){return{type:"DELETE_NOTE_FOREVER"}},c=function(e,t){return{type:"FILTER_NOTES",notes:e,tags:t}},u=function(){return{type:"FOCUS_SEARCH_FIELD"}},s=function(){return{type:"LOGOUT"}},l=function(e,t){return{type:"SET_SYSTEM_TAG",note:e,tagName:"markdown",shouldHaveTag:t}},f=function(e,t){return{type:"SET_SYSTEM_TAG",note:e,tagName:"pinned",shouldHaveTag:t}},p=function(e,t){return{type:"SET_SYSTEM_TAG",note:e,tagName:"published",shouldHaveTag:t}},d=function(e){return{type:"OPEN_NOTE",note:e}},m=function(e){return{type:"OPEN_TAG",tag:e}},b=function(){return{type:"RESTORE_NOTE"}},y=function(e){return{type:"SELECT_REVISION",revision:e}},h=function(){return{type:"SELECT_TRASH"}},g=function(e){return{type:"SET_UNSYNCED_NOTE_IDS",noteIds:e}},v=function(){return{type:"SHOW_ALL_NOTES"}},E=function(e){return{type:"SHOW_DIALOG",dialog:e}},O=function(e,t){return{type:"STORE_REVISIONS",noteId:e,revisions:t}},w=function(){return{type:"REVISIONS_TOGGLE"}},S=function(e){return{type:"SIMPERIUM_CONNECTION_STATUS_TOGGLE",simperiumConnected:e}},j=function(e){return{type:"SEARCH",searchQuery:e}},N=function(e){return{type:"SELECT_NOTE",note:e}},T=function(){return{type:"TOGGLE_EDIT_MODE"}},k=function(){return{type:"NAVIGATION_TOGGLE"}},_=function(){return{type:"NOTE_LIST_TOGGLE"}},R=function(){return{type:"NOTE_INFO_TOGGLE"}},P=function(e){return{type:"TAG_DRAWER_TOGGLE",show:e}},C=function(){return{type:"TAG_EDITING_TOGGLE"}},A=function(){return{type:"TRASH_NOTE"}}},165:function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t=e.children,n=e.headingLevel,o=void 0===n?3:n;return Object(r.createElement)("h".concat(o),{className:"panel-title theme-color-fg-dim"},t)}},169:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"remoteNoteUpdate",(function(){return i}));var o={};n.r(o),n.d(o,"tagsLoaded",(function(){return c}));var a=n(253),i=function(e,t){return{type:"REMOTE_NOTE_UPDATE",noteId:e,data:t}},c=function(e,t){return{type:"TAGS_LOADED",tags:e,sortTagsAlpha:t}},u=n(128);t.a={simperium:r,settings:a,tags:o,ui:u}},180:function(e,t,n){"use strict";var r=n(4),o=n(679),a=n.n(o),i=n(50),c=n.n(i);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{type:this}].concat(t))}var f=function(){function e(t){var n=this,r=t.namespace,o=t.initialState,a=t.handlers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"actionCreators",void 0),s(this,"actionReducers",void 0),s(this,"initialState",void 0),s(this,"namespace",void 0),this.namespace=r,this.initialState=o,this.actionCreators={},this.actionReducers={},r=r?"".concat(r,"."):"",Object.getOwnPropertyNames(a).forEach((function(e){var t=a[e];"function"==typeof t?(n.actionCreators[e]=l.bind("".concat(r).concat(e)),n.actionReducers["".concat(r).concat(e)]=t):n.actionCreators[e]=t.creator.bind(n)||l.bind("".concat(r).concat(e))}))}var t,n,r;return t=e,(n=[{key:"action",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.actionCreators[e].apply(this,n)}},{key:"reducer",value:function(e,t){var n=e||this.initialState,r=this.actionReducers[t.type];return"function"==typeof r&&r(n,t)||n}}])&&u(t.prototype,n),r&&u(t,r),e}(),p=n(169);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=c()("appState"),E=new f({namespace:"App",initialState:{notes:null,preferences:{analytics_enabled:null},tags:[],unsyncedNoteIds:[]},handlers:{showAllNotesAndSelectFirst:{creator:function(){var e=this;return function(t,n){t(p.a.ui.showAllNotes()),t(e.action("notesLoaded",{notes:n().appState.notes}))}}},newNote:{creator:function(e){var t=e.noteBucket,n=e.content,r=void 0===n?"":n;return function(e,n){var o=n(),a=o.settings,i=o.ui.openedTag,c=(new Date).getTime()/1e3;t.add({content:r,deleted:!1,systemTags:a.markdownEnabled?["markdown"]:[],creationDate:c,modificationDate:c,shareURL:"",publishURL:"",tags:i?[i.data.name]:[]},(function(t,n){if(t)return v("newNote: could not create note - ".concat(t.message));e(p.a.ui.createNote()),setTimeout((function(){return e(p.a.ui.selectNote(n))}),500)}))}}},loadNotes:{creator:function(e){var t=this,n=e.noteBucket;return function(e,r){var o,a=r().settings,i=a.sortType,c=a.sortReversed;v("loadNotes"),o="alphabetical"===i?c?"prev":"next":c?"next":"prev",n.query((function(n){var r=[];n.transaction("note").objectStore("note").index(i).openCursor(null,o).onsuccess=function(n){var o=n.target.result;o?(r.push(o.value),o.continue()):(v("noteCount: ".concat(r.length)),r.length&&e(t.action("notesLoaded",{notes:r})))}}))}}},notesLoaded:function(e,t){var n=t.notes,o=y(Object(r.partition)(n,(function(e){return e.data.systemTags.includes("pinned")})),2),i=o[0],c=o[1],u=[].concat(b(i),b(c));return a()(e,{notes:{$set:u}})},loadAndSelectNote:{creator:function(e){var t=e.noteBucket,n=e.noteId,r=e.hasRemoteUpdate,o=void 0!==r&&r;return function(e){t.get(n,(function(t,n){e(p.a.ui.selectNote(n,{hasRemoteUpdate:o}))}))}}},onNoteBeforeRemoteUpdate:{creator:function(e){var t=e.noteId;return function(e,n){var r=n().appState,o=r.note,a=r.notes;if(o&&o.id===t)return o.data;var i=(a||[]).find((function(e){var n=e.id;return t===n}));return i?i.data:null}}},trashNote:{creator:function(e){var t=e.noteBucket,n=e.note;return function(e){n&&(n.data.deleted=!0,t.update(n.id,n.data),e(p.a.ui.trashNote()))}}},restoreNote:{creator:function(e){var t=e.noteBucket,n=e.note;return function(e){n&&(n.data.deleted=!1,t.update(n.id,n.data),e(p.a.ui.restoreNote()))}}},deleteNoteForever:{creator:function(e){var t=this,n=e.noteBucket,r=e.note;return function(e){n.remove(r.id),e(t.action("loadNotes",{noteBucket:n})),e(p.a.ui.deleteNoteForever())}}},emptyTrash:{creator:function(e){var t=this,n=e.noteBucket;return function(e,o){var a=o().appState,i=y(Object(r.partition)(a.notes,(function(e){return e.data.deleted})),2),c=i[0],u=i[1];c.forEach((function(e){return n.remove(e.id)})),e(t.action("notesLoaded",{notes:u}))}}},loadPreferences:{creator:function(e){var t=this,n=e.callback,o=e.preferencesBucket;return function(e){o.get("preferences-key",(function(a,i){var c=Object(r.get)(i,"data.analytics_enabled",!0);c=Boolean(c),void 0===i&&o.update("preferences-key",{}),window.analyticsEnabled=c,"function"==typeof n&&n(),e(t.action("preferencesLoaded",{analyticsEnabled:c}))}))}}},preferencesLoaded:function(e,t){var n=t.analyticsEnabled;return a()(e,{preferences:{$set:{analyticsEnabled:n}}})},setPreference:function(e,t){var n=t.key,r=t.value,o=t.preferencesBucket;o.get("preferences-key",(function(e,t){o.update("preferences-key",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.data,m({},n,r)))}))},toggleShareAnalyticsPreference:{creator:function(e){var t=this,n=e.preferencesBucket;return function(e,r){var o=r().appState.preferences.analyticsEnabled;e(t.action("setPreference",{key:"analytics_enabled",value:!o,preferencesBucket:n}))}}}}});t.a=E},202:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s}));var r=n(4);function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=function(e){return e.replace(/(?:\btag:)([^\s,]+)/g,"").trim()},c=function(e){return!!i(e)},u=function(e){if(!e)return[];for(var t,n=/(?:")((?:"|[^"])+)(?:")/g,r="",a=i(e),c=[];null!==(t=n.exec(a));)c.push(t[0].slice(1,-1)),r+=a.slice(n.lastIndex,t.index);(n.lastIndex>0||0===c.length)&&n.lastIndex<a.length&&(r+=a.slice(n.lastIndex));var u=r.split(/[\b\s]/g).map((function(e){return e.trim()})).filter((function(e){return e}));return[].concat(c,o(u))},s=function(e){var t=u(i(e));return t.length?new RegExp("(?:".concat(t.map((function(e){return"(?:".concat(Object(r.escapeRegExp)(e),")")})).join("|"),")"),"gi"):new RegExp(".+","g")};Object.freeze([])},224:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p}));var r=n(388),o=n(256),a=n(254);function i(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e,t,n){var r=e.data.systemTags,o=void 0===r?[]:r;return o.includes(t)!==n?s({},e,{data:s({},e.data,{systemTags:n?[].concat(i(o),[t]):o.filter((function(e){return e!==t}))})}):e},p=function(e){var t=e.note,n=e.tags;return function(e,i){if(t){Object(r.a)().update(t.id,s({},t.data,{tags:n,modificationDate:Math.floor(Date.now()/1e3)}));var c=new Set(i().tags.map((function(e){return e.data.name})));n.filter((function(e){return!c.has(e)})).filter((function(e){return!Object(o.a)(e)})).forEach((function(e){return Object(a.a)({name:e})}))}}}},253:function(e,t,n){"use strict";n.r(t),n.d(t,"setFontSize",(function(){return a})),n.d(t,"increaseFontSize",(function(){return i})),n.d(t,"decreaseFontSize",(function(){return c})),n.d(t,"resetFontSize",(function(){return u})),n.d(t,"activateTheme",(function(){return s})),n.d(t,"setNoteDisplay",(function(){return l})),n.d(t,"setLineLength",(function(){return f})),n.d(t,"toggleSortOrder",(function(){return p})),n.d(t,"setSortType",(function(){return d})),n.d(t,"toggleSortTagsAlpha",(function(){return m})),n.d(t,"setAccountName",(function(){return b})),n.d(t,"toggleFocusMode",(function(){return y})),n.d(t,"toggleSpellCheck",(function(){return h})),n.d(t,"toggleAutoHideMenuBar",(function(){return g}));var r=n(300),o=Object(r.a)(),a=function(e){return{type:"setFontSize",fontSize:e}},i=function(){return function(e,t){var n=t().settings.fontSize;e(a(n+1))}},c=function(){return function(e,t){var n=t().settings.fontSize;e(a(n-1))}},u=function(){return a(void 0)},s=function(e){return{type:"setTheme",theme:e}},l=function(e){return{type:"setNoteDisplay",noteDisplay:e}},f=function(e){return{type:"setLineLength",lineLength:e}},p=function(){return function(e,t){e({type:"setSortReversed",sortReversed:!t().settings.sortReversed})}},d=function(e){return{type:"setSortType",sortType:e}},m=function(){return function(e,t){e({type:"setSortTagsAlpha",sortTagsAlpha:!t().settings.sortTagsAlpha})}},b=function(e){return{type:"setAccountName",accountName:e}},y=function(){return function(e,t){e({type:"setFocusMode",focusModeEnabled:!t().settings.focusModeEnabled})}},h=function(){return function(e,t){e({type:"setSpellCheck",spellCheckEnabled:!t().settings.spellCheckEnabled})}},g=function(){return function(e,t){var n=!t().settings.autoHideMenuBar;o.send("setAutoHideMenuBar",n),e({type:"setAutoHideMenuBar",autoHideMenuBar:n})}}},254:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return p}));var r=n(388),o=n(169);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){return function(e,t){var n=t().settings.sortTagsAlpha;Object(r.b)().query((function(t){var r=[];t.transaction("tag").objectStore("tag").openCursor(null,"prev").onsuccess=function(t){var a=t.target.result;a?(r.push(a.value),a.continue()):e(o.a.tags.tagsLoaded(r,n))}}))}},s=function(e){var t=e.name,n=encodeURIComponent(t.toLowerCase());Object(r.b)().update(n,{name:t})},l=function(e){var t=e.tags;return function(){return t.forEach((function(e,t){return Object(r.b)().update(e.id,i({},e.data,{index:t}))}))}},f=function(e){var t=e.tag,n=e.name;return function(e,o){var a=o().appState.notes,c=t.data.name;c!==n&&(Object(r.b)().update(t.id,i({},t.data,{name:n})),a.filter((function(e){return(e.data.tags||[]).includes(c)})).map((function(e){return i({},e,{data:i({},e.data,{tags:e.data.tags.map((function(e){return e===c?n:e}))})})})).forEach((function(e){return Object(r.a)().update(e.id,e.data)})))}},p=function(e){var t=e.tag;return function(e,n){var o=n().appState.notes,a=t.data.name;o.filter((function(e){return(e.data.tags||[]).includes(a)})).map((function(e){return i({},e,{data:i({},e.data,{tags:e.data.tags.filter((function(e){return e!==a}))})})})).forEach((function(e){return Object(r.a)().update(e.id,e.data)})),Object(r.b)().remove(t.id,(function(){return e(u())}))}}},256:function(e,t,n){"use strict";var r=/^(?:[^@]+)@(?:.+)(?:\.[^.]{2,})$/;t.a=function(e){return r.test(e)}},300:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4);function o(){try{return require("electron").ipcRenderer}catch(e){return{on:r.noop,removeListener:r.noop,send:r.noop}}}},302:function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var r=n(693),o=n.n(r),a=n(4);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e){return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.exec(n);if(!a||o>4||r.length>200)return r;var c=i(a,2),u=c[1];return e(t,n,r+u,o+1)}(new RegExp("[^\n]*\n+[ \t]*([^]{0,".concat(200,"})"),"g"),e)},s=function(e,t){return e?(n=t,o()(n.replace(/(\s)\s+/g,"$1"),{stripListLeaders:!1})||t):t;var n};var l=function(e){var t=e.replace(/^\s*#+\s*/,"").replace(/\s+/g," ").trim().slice(0,200).toLowerCase();return Object(a.isFunction)(t.normalize)&&(t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),t};t.a=function(e){var t=e&&e.data&&e.data.content||"",n=function(e){return e&&e.data&&e.data.systemTags.includes("markdown")}(e);return{title:s(n,function(e){var t=new RegExp("\\s*([^\n]{1,".concat(64,"})"),"g").exec(e);return t?i(t,2)[1]:"New Note…"}(t)),preview:s(n,u(t))}}},307:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1105);t.a=function(e){var t=e.children,n=e.shouldMount,r=e.wrapperClassName,i=void 0===r?"":r;return o.a.createElement(a.a,{in:n,classNames:"transition-fade-in-out",mountOnEnter:!0,timeout:200,unmountOnExit:!0},o.a.createElement("div",{className:i},t))}},388:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(389),o=function(){return Object(r.a)().bucket("note")},a=function(){return Object(r.a)().bucket("tag")}},389:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var r,o=n(681),a=function(e){return r=Object(o.a)(e)};t.a=function(){return r}},391:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var r=n(4),o=n(50),a=n.n(o)()("localQueueStore");function i(e){return"localQueue:".concat(e.name)}function c(e){return e.channel.localQueue}var u={persist:function(e){var t=c(e),n=t.queues,r=t.sent;window.localStorage.setItem(i(e),JSON.stringify({queues:n,sent:r}))},restoreTo:function(e){var t=i(e),n=c(e),o=JSON.parse(window.localStorage.getItem(t))||{},u=o.queues,s=void 0===u?{}:u,l=o.sent,f=void 0===l?{}:l;window.localStorage.removeItem(t),n.queues=s,Object.values(f).filter((function(e){return Object(r.isEmpty)(s[e.id])})).forEach((function(e){n.queues[e.id]=[e]})),a("Restored %d offline changes for '".concat(e.name,"' bucket"),Object.keys(n.queues).length)}};t.a=u},394:function(e,t,n){"use strict";function r(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e,t,n){var o,a=[],i=r(e);try{for(i.s();!(o=i.n()).done;){var c=o.value;if(t(c)&&a.push(c),a.length===n)break}}catch(e){i.e(e)}finally{i.f()}return a}},395:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=n.n(r);function a(){return o.a.createElement("svg",{className:"logo",width:"96",height:"96",viewBox:"0 0 176 176"},o.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},o.a.createElement("path",{d:"M152.37 87.885c0-34.066-27.182-63.42-59.45-64.854-6.416-.284-12.647 1.432-17.58 5.573-5.002 4.196-8.07 10.09-8.638 16.595C65.43 59.73 78.537 68.618 91.225 72.09c30.69 8.398 48.462 30.086 46.655 56.757 9.057-11.194 14.49-25.442 14.49-40.962zM84.345 97.24c-28.696-7.853-45.817-29.174-43.62-54.317.027-.287.073-.567.102-.852C29.19 53.846 22 70.023 22 87.886c0 34.348 27.955 63.828 60.277 64.933 7.227.248 14.214-1.685 19.766-6.344 5.67-4.757 9.146-11.435 9.79-18.808 1.703-19.463-16.492-27.417-27.488-30.426z",fill:"#4895d9"})))}},407:function(e,t,n){"use strict";n.d(t,"b",(function(){return v}));var r=n(0),o=n.n(r),a=n(117),i=n(8),c=n(128),u=n(394);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,n,a,i,c=(t=u,function(){var e,n=y(t);if(b()){var r=y(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d(this,e)});function u(){var e;l(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h(m(e=c.call.apply(c,[this].concat(n))),"updateSearch",(function(t){var n=e.props,r=n.searchQuery,o=n.onSearch,a=r.trim().split(" ");a.splice(-1,1,t);var i=a.join(" ");o(i+=" ")})),e}return n=u,(a=[{key:"render",value:function(){var e=this,t=this.props.filteredTags;return o.a.createElement(r.Fragment,null,t.length>0&&o.a.createElement("div",{className:"tag-suggestions"},o.a.createElement("div",{className:"note-list-header"},"Search by Tag"),o.a.createElement("ul",{className:"tag-suggestions-list"},t.map((function(t){return o.a.createElement("li",{key:t.id,id:t.id,className:"tag-suggestion-row",onClick:function(){return e.updateSearch("tag:".concat(t.data.name))}},o.a.createElement("div",{className:"tag-suggestion",title:t.data.name},"tag:",t.data.name))})))))}}])&&f(n.prototype,a),i&&f(n,i),u}(r.Component);h(g,"displayName","TagSuggestions");var v=function(e,t){var n=t.trim().toLowerCase().split(" ").pop();if(!n)return e;var r=n.startsWith("tag:")&&n.length>4,o=r?n.slice(4):n,a=r?function(e){var t=e.data.name;return t.toLowerCase()!==o&&t.toLowerCase().startsWith(o)}:function(e){return e.data.name.toLowerCase().includes(o)};return Object(u.a)(e,a,5)};t.a=Object(a.b)((function(e){var t=e.ui,n=t.searchQuery;return{filteredTags:t.tagSuggestions,searchQuery:n}}),(function(e){return{onSearch:function(t){e(Object(c.search)(t)),i.a.tracks.recordEvent("list_notes_searched")}}}))(g)},681:function(e,t,n){"use strict";(function(e){var r=n(36),o=n.n(r),a=n(1097),i=n(682),c=n.n(i),u=n(391),s=n(392),l=n.n(s),f=n(15),p=n.n(f);o.a.Auth;function d(e){var t=e.appID,n=e.token,r=e.bucketConfig,i=e.database,s=e.version;this.databaseName=i||"simperium-objects",this.databaseVersion=s||1;var l=this.bucketConfig=r;this.bucketDB=Object(a.a)(this.configureDb.bind(this)),this.buckets={};var f=this.bucketDB.provider();for(var p in this.ghostStore=c.a,this.client=o()(t,n,{ghostStoreProvider:c.a,objectStoreProvider:function(e){var t=f.apply(null,arguments);return l[e.name].beforeIndex&&(t.beforeIndex=l[e.name].beforeIndex),t}}),["send","message","connect","reconnect","disconnect","unauthorized"].forEach(function(e){this.client.on(e,function(){var t=[].slice.call(arguments);this.emit.apply(this,[e].concat(t))}.bind(this))}.bind(this)),r){var d=this.client.bucket(p);u.a.restoreTo(d),this.buckets[p]=d}}t.a=function(e){var t=new d(e);return window.addEventListener("beforeunload",(function(){Object.values(t.buckets).forEach(u.a.persist)})),t},r.Client.Bucket.prototype.query=function(e){this.store.setup.then(e)},l.a.inherits(d,p.a.EventEmitter),d.prototype.configureDb=function(t){var n=window.indexedDB.open(this.databaseName,this.databaseVersion),r=!1;n.onupgradeneeded=function(e){r=!0;var t=e.target.result,n=t.objectStoreNames;for(var o in this.bucketConfig){var a=this.bucketConfig[o];"function"!=typeof a&&(a=a.configure),n.contains(o)&&t.deleteObjectStore(o),a(t.createObjectStore(o,{keyPath:"id"}))}}.bind(this),n.onerror=function(e){console.log("So failed",e)},n.onsuccess=function(n){if(e.bucketDB=n.target.result,t(n.target.result),r)for(var o in this.buckets)this.buckets[o].reload()}.bind(this)},d.prototype.isAuthorized=function(){return!!this.client.accessToken},d.prototype.reset=function(){return this.bucketDB.reset().then((function(){return c.a.reset()}),(function(e){console.error("Failed to reset",e)}))},d.prototype.bucket=function(e){return this.buckets[e]},d.prototype.setUser=function(e){this.client.setAccessToken(e.access_token),this.emit("authorized")},d.prototype.deauthorize=function(){this.client.setAccessToken(null),this.emit("unauthorized"),this.client.end(),this.reset()},d.prototype.clearAuthorization=function(){this.client.setAccessToken(null),this.client.end()}}).call(this,n(7))},682:function(e,t,n){var r=n(683),o=window.indexedDB,a=new r((function(e,t){var n=o.open("ghost",200);n.onupgradeneeded=function(e){var t=e.target.result,n=t.objectStoreNames;n.contains("cv")&&t.deleteObjectStore("cv"),t.createObjectStore("cv",{keyPath:"bucket"}).createIndex("bucket","bucket",{unique:!0}),n.contains("ghosts")&&t.deleteObjectStore("ghosts");var r=t.createObjectStore("ghosts",{keyPath:"full_key"});r.createIndex("bucket","bucket"),r.createIndex("full_key","full_key",{unique:!0})},n.onsuccess=function(t){var n=t.target.result;e(n)},n.onerror=function(e){t(e.target.error)}}));function i(e){this.bucket=e}a.then((function(){})),a.catch((function(e){window.confirm("\n  Simplenote is unable to retrieve your notes.\n  \n  This can happen if you are using a private browsing mode or you have history turned off.\n\n  Would you like to try again using a limited version of the app?\n  ")&&(window.location="https://app.simplenote.com/old"),console.error(e)})),o.onerror=function(e){console.log("Some kind of error",e)},i.prototype.getChangeVersion=function(){var e=this.bucket;return new r((function(t){a.then((function(n){n.transaction("cv").objectStore("cv").get(e.name).onsuccess=function(e){var n=e.target.result,r=null;n&&(r=n.cv),t(r)}}))}))},i.prototype.setChangeVersion=function(e){var t=this.bucket;return new r((function(n){a.then((function(r){r.transaction("cv","readwrite").objectStore("cv").put({bucket:t.name,cv:e}).onsuccess=n}))}))},i.prototype.put=function(e,t,n){var o=this.bucket;return new r((function(r){a.then((function(a){var i=a.transaction(["ghosts"],"readwrite").objectStore("ghosts"),c=o.name+"."+e,u={key:e,version:t,data:n,full_key:c,bucket:o.name};i.put(u).onsuccess=function(e){r(e.target.result)}}))}))},i.prototype.get=function(e){var t=this.bucket;return new r((function(n,r){a.then((function(o){var a=o.transaction("ghosts").objectStore("ghosts"),i=t.name+"."+e,c=a.get(i);c.onsuccess=function(t){var r=t.target.result;r||(r={key:e,data:{}}),n(r)},c.onerror=function(e){var t=new Error("failed to get ghost "+i);t.objectStoreEvent=e,r(t)}}))}))},i.prototype.remove=function(e){var t=this.bucket;return new r((function(n,r){a.then((function(o){var a=o.transaction("ghosts","readwrite").objectStore("ghosts"),i=t.name+"."+e,c=a.delete(i);c.onsuccess=function(){n()},c.onerror=function(){r(new Error("Failed to delete ghost "+i))}}))}))},i.prototype.eachGhost=function(e){var t=this.bucket;a.then((function(n){n.transaction("ghosts").objectStore("ghosts").index("bucket").openCursor(IDBKeyRange.only(t.name)).onsuccess=function(t){var n=t.target.result;n&&(e(n.value),n.continue())}}),(function(){console.log("Failed!")}))},e.exports=function(e){return new i(e)},e.exports.GhostStore=i,e.exports.reset=function(){return a.then((function(e){return r.all([].map.call(e.objectStoreNames,(function(t){return new r((function(n,r){var o=e.transaction(t,"readwrite").objectStore(t).clear();o.onsuccess=function(){n(t)},o.onerror=function(e){r(e)}}))})))}))}},709:function(e,t){},711:function(e,t){}}]);